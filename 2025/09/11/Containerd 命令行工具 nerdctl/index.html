<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-bounce.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":"mac"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Containerd å‘½ä»¤è¡Œå·¥å…· nerdctlå‰é¢æˆ‘ä»¬ä»‹ç»äº†å¯ä»¥ä½¿ç”¨ ctr æ“ä½œç®¡ç† containerd é•œåƒå®¹å™¨ï¼Œä½†æ˜¯å¤§å®¶éƒ½ä¹ æƒ¯äº†ä½¿ç”¨ docker cliï¼Œctr ä½¿ç”¨èµ·æ¥å¯èƒ½è¿˜æ˜¯ä¸å¤ªé¡ºæ‰‹ï¼Œä¸ºäº†èƒ½å¤Ÿè®©å¤§å®¶æ›´å¥½çš„è½¬åˆ° containerd ä¸Šé¢æ¥ï¼Œç¤¾åŒºæä¾›äº†ä¸€ä¸ªæ–°çš„å‘½ä»¤è¡Œå·¥å…·ï¼šnerdctlã€‚nerdctl æ˜¯ä¸€ä¸ªä¸ docker cli é£æ ¼å…¼å®¹çš„ containerd å®¢æˆ·ç«¯å·¥å…·ï¼Œè€Œä¸”">
<meta property="og:type" content="article">
<meta property="og:title" content="Containerd å‘½ä»¤è¡Œå·¥å…· nerdctl">
<meta property="og:url" content="http://example.com/2025/09/11/Containerd%20%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7%20nerdctl/index.html">
<meta property="og:site_name" content="Hui&#39;s Blog">
<meta property="og:description" content="Containerd å‘½ä»¤è¡Œå·¥å…· nerdctlå‰é¢æˆ‘ä»¬ä»‹ç»äº†å¯ä»¥ä½¿ç”¨ ctr æ“ä½œç®¡ç† containerd é•œåƒå®¹å™¨ï¼Œä½†æ˜¯å¤§å®¶éƒ½ä¹ æƒ¯äº†ä½¿ç”¨ docker cliï¼Œctr ä½¿ç”¨èµ·æ¥å¯èƒ½è¿˜æ˜¯ä¸å¤ªé¡ºæ‰‹ï¼Œä¸ºäº†èƒ½å¤Ÿè®©å¤§å®¶æ›´å¥½çš„è½¬åˆ° containerd ä¸Šé¢æ¥ï¼Œç¤¾åŒºæä¾›äº†ä¸€ä¸ªæ–°çš„å‘½ä»¤è¡Œå·¥å…·ï¼šnerdctlã€‚nerdctl æ˜¯ä¸€ä¸ªä¸ docker cli é£æ ¼å…¼å®¹çš„ containerd å®¢æˆ·ç«¯å·¥å…·ï¼Œè€Œä¸”">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://mudutestmenu.mudu.tv/upload/7oga7u.png">
<meta property="article:published_time" content="2025-09-11T12:32:34.000Z">
<meta property="article:modified_time" content="2025-09-11T14:26:02.210Z">
<meta property="article:author" content="å…­ä¸€">
<meta property="article:tag" content="è¿ç»´">
<meta property="article:tag" content="k8s">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://mudutestmenu.mudu.tv/upload/7oga7u.png">

<link rel="canonical" href="http://example.com/2025/09/11/Containerd%20%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7%20nerdctl/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Containerd å‘½ä»¤è¡Œå·¥å…· nerdctl | Hui's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hui's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Code Life</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/09/11/Containerd%20%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7%20nerdctl/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="å…­ä¸€">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hui's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Containerd å‘½ä»¤è¡Œå·¥å…· nerdctl
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2025-09-11 20:32:34 / ä¿®æ”¹æ—¶é—´ï¼š22:26:02" itemprop="dateCreated datePublished" datetime="2025-09-11T20:32:34+08:00">2025-09-11</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/k8s/" itemprop="url" rel="index"><span itemprop="name">k8s</span></a>
                </span>
                  ï¼Œ
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/k8s/%E5%AE%B9%E5%99%A8%E8%BF%90%E8%A1%8C%E6%97%B6/" itemprop="url" rel="index"><span itemprop="name">å®¹å™¨è¿è¡Œæ—¶</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>14k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>12 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Containerd-å‘½ä»¤è¡Œå·¥å…·-nerdctl"><a href="#Containerd-å‘½ä»¤è¡Œå·¥å…·-nerdctl" class="headerlink" title="Containerd å‘½ä»¤è¡Œå·¥å…· nerdctl"></a>Containerd å‘½ä»¤è¡Œå·¥å…· nerdctl</h1><p>å‰é¢æˆ‘ä»¬ä»‹ç»äº†å¯ä»¥ä½¿ç”¨ <code>ctr</code> æ“ä½œç®¡ç† containerd é•œåƒå®¹å™¨ï¼Œä½†æ˜¯å¤§å®¶éƒ½ä¹ æƒ¯äº†ä½¿ç”¨ docker cliï¼Œ<code>ctr</code> ä½¿ç”¨èµ·æ¥å¯èƒ½è¿˜æ˜¯ä¸å¤ªé¡ºæ‰‹ï¼Œä¸ºäº†èƒ½å¤Ÿè®©å¤§å®¶æ›´å¥½çš„è½¬åˆ° containerd ä¸Šé¢æ¥ï¼Œç¤¾åŒºæä¾›äº†ä¸€ä¸ªæ–°çš„å‘½ä»¤è¡Œå·¥å…·ï¼š<a target="_blank" rel="noopener" href="https://github.com/containerd/nerdctl">nerdctl</a>ã€‚nerdctl æ˜¯ä¸€ä¸ªä¸ docker cli é£æ ¼å…¼å®¹çš„ containerd å®¢æˆ·ç«¯å·¥å…·ï¼Œè€Œä¸”ç›´æ¥å…¼å®¹ docker compose çš„è¯­æ³•çš„ï¼Œè¿™å°±å¤§å¤§æé«˜äº†ç›´æ¥å°† containerd ä½œä¸ºæœ¬åœ°å¼€å‘ã€æµ‹è¯•æˆ–è€…å•æœºå®¹å™¨éƒ¨ç½²ä½¿ç”¨çš„æ•ˆç‡ã€‚</p>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>åŒæ ·ç›´æ¥åœ¨ GitHub Release é¡µé¢ä¸‹è½½å¯¹åº”çš„å‹ç¼©åŒ…è§£å‹åˆ° PATH è·¯å¾„ä¸‹å³å¯ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¦‚æœæ²¡æœ‰å®‰è£… containerdï¼Œåˆ™å¯ä»¥ä¸‹è½½ nerdctl-full-&lt;VERSION&gt;-linux-amd64.tar.gz åŒ…è¿›è¡Œå®‰è£…</span></span><br><span class="line">âœ  ~ wget https://github.com/containerd/nerdctl/releases/download/v0.12.1/nerdctl-0.12.1-linux-amd64.tar.gz</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¦‚æœæœ‰é™åˆ¶ï¼Œä¹Ÿå¯ä»¥æ›¿æ¢æˆä¸‹é¢çš„ URL åŠ é€Ÿä¸‹è½½</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">wget https://download.fastgit.org/containerd/nerdctl/releases/download/v0.12.1/nerdctl-0.12.1-linux-amd64.tar.gz</span></span><br><span class="line">âœ  ~ mkdir -p /usr/local/containerd/bin/ &amp;&amp; tar -zxvf nerdctl-0.12.1-linux-amd64.tar.gz nerdctl &amp;&amp; mv nerdctl /usr/local/containerd/bin/</span><br><span class="line">âœ  ~ ln -s /usr/local/containerd/bin/nerdctl /usr/local/bin/nerdctl</span><br><span class="line">âœ  ~ nerdctl version</span><br><span class="line">Client:</span><br><span class="line"> Version:       v0.12.1</span><br><span class="line"> Git commit:    c802f934791f83dacf20a041cd1c865f8fac954e</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> containerd:</span><br><span class="line">  Version:      v1.5.5</span><br><span class="line">  Revision:     72cec4be58a9eb6b2910f5d10f1c01ca47d231c0</span><br></pre></td></tr></table></figure>

<p>å®‰è£…å®Œæˆåæ¥ä¸‹æ¥å­¦ä¹ ä¸‹ <code>nerdctl</code> å‘½ä»¤è¡Œå·¥å…·çš„ä½¿ç”¨ã€‚</p>
<h2 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h2><h3 id="Run-Exec"><a href="#Run-Exec" class="headerlink" title="Run&amp;Exec"></a>Run&amp;Exec</h3><p><strong>ğŸ³nerdctl run</strong></p>
<p>å’Œ <code>docker run</code> ç±»ä¼¼å¯ä»¥ä½¿ç”¨ <code>nerdctl run</code> å‘½ä»¤è¿è¡Œå®¹å™¨ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ nerdctl run -d -p 80:80 --name=nginx --restart=always nginx:alpine</span><br><span class="line">docker.io/library/nginx:alpine:                                                   resolved       |++++++++++++++++++++++++++++++++++++++|</span><br><span class="line">index-sha256:bead42240255ae1485653a956ef41c9e458eb077fcb6dc664cbc3aa9701a05ce:    done           |++++++++++++++++++++++++++++++++++++++| manifest-sha256:ce6ca11a3fa7e0e6b44813901e3289212fc2f327ee8b1366176666e8fb470f24: done           |++++++++++++++++++++++++++++++++++++++| config-sha256:7ce0143dee376bfd2937b499a46fb110bda3c629c195b84b1cf6e19be1a9e23b:   done           |++++++++++++++++++++++++++++++++++++++| elapsed: 5.3 s                                                                    total:  3.1 Ki (606.0 B/s)                                       6e489777d2f73dda8a310cdf8da9df38353c1aa2021d3c2270b30eff1806bcf8</span><br></pre></td></tr></table></figure>

<p>å¯é€‰çš„å‚æ•°ä½¿ç”¨å’Œ <code>docker run</code> åŸºæœ¬ä¸€ç›´ï¼Œæ¯”å¦‚ <code>-i</code>ã€<code>-t</code>ã€<code>--cpus</code>ã€<code>--memory</code> ç­‰é€‰é¡¹ï¼Œå¯ä»¥ä½¿ç”¨ <code>nerdctl run --help</code> è·å–å¯ä½¿ç”¨çš„å‘½ä»¤é€‰é¡¹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ nerdctl run --help</span><br><span class="line">NAME:</span><br><span class="line">   nerdctl run - Run a command in a new container</span><br><span class="line"></span><br><span class="line">USAGE:</span><br><span class="line">   nerdctl run [command options] [arguments...]</span><br><span class="line"></span><br><span class="line">OPTIONS:</span><br><span class="line">   --help                        show help (default: false)</span><br><span class="line">   --tty, -t                     (Currently -t needs to correspond to -i) (default: false)</span><br><span class="line">   --interactive, -i             Keep STDIN open even if not attached (default: false)</span><br><span class="line">   --detach, -d                  Run container in background and print container ID (default: false)</span><br><span class="line">   --restart value               Restart policy to apply when a container exits (implemented values: &quot;no&quot;|&quot;always&quot;) (default: &quot;no&quot;)</span><br><span class="line">   --rm                          Automatically remove the container when it exits (default: false)</span><br><span class="line">   --pull value                  Pull image before running (&quot;always&quot;|&quot;missing&quot;|&quot;never&quot;) (default: &quot;missing&quot;)</span><br><span class="line">   --network value, --net value  Connect a container to a network (&quot;bridge&quot;|&quot;host&quot;|&quot;none&quot;) (default: &quot;bridge&quot;)</span><br><span class="line">   --dns value                   Set custom DNS servers (default: &quot;8.8.8.8&quot;, &quot;1.1.1.1&quot;)</span><br><span class="line">   --publish value, -p value     Publish a container&#x27;s port(s) to the host</span><br><span class="line">   --hostname value, -h value    Container host name</span><br><span class="line">   --cpus value                  Number of CPUs (default: 0)</span><br><span class="line">   --memory value, -m value      Memory limit</span><br><span class="line">   --pid value                   PID namespace to use</span><br><span class="line">   --pids-limit value            Tune container pids limit (set -1 for unlimited) (default: -1)</span><br><span class="line">   --cgroupns value              Cgroup namespace to use, the default depends on the cgroup version (&quot;host&quot;|&quot;private&quot;) (default: &quot;host&quot;)</span><br><span class="line">   --cpuset-cpus value           CPUs in which to allow execution (0-3, 0,1)</span><br><span class="line">   --cpu-shares value            CPU shares (relative weight) (default: 0)</span><br><span class="line">   --device value                Add a host device to the container</span><br><span class="line">   --user value, -u value        Username or UID (format: &lt;name|uid&gt;[:&lt;group|gid&gt;])</span><br><span class="line">   --security-opt value          Security options</span><br><span class="line">   --cap-add value               Add Linux capabilities</span><br><span class="line">   --cap-drop value              Drop Linux capabilities</span><br><span class="line">   --privileged                  Give extended privileges to this container (default: false)</span><br><span class="line">   --runtime value               Runtime to use for this container, e.g. &quot;crun&quot;, or &quot;io.containerd.runsc.v1&quot; (default: &quot;io.containerd.runc.v2&quot;)</span><br><span class="line">   --sysctl value                Sysctl options</span><br><span class="line">   --gpus value                  GPU devices to add to the container (&#x27;all&#x27; to pass all GPUs)</span><br><span class="line">   --volume value, -v value      Bind mount a volume</span><br><span class="line">   --read-only                   Mount the container&#x27;s root filesystem as read only (default: false)</span><br><span class="line">   --rootfs                      The first argument is not an image but the rootfs to the exploded container (default: false)</span><br><span class="line">   --entrypoint value            Overwrite the default ENTRYPOINT of the image</span><br><span class="line">   --workdir value, -w value     Working directory inside the container</span><br><span class="line">   --env value, -e value         Set environment variables</span><br><span class="line">   --env-file value              Set environment variables from file</span><br><span class="line">   --name value                  Assign a name to the container</span><br><span class="line">   --label value, -l value       Set meta data on a container</span><br><span class="line">   --label-file value            Read in a line delimited file of labels</span><br><span class="line">   --cidfile value               Write the container ID to the file</span><br><span class="line">   --shm-size value              Size of /dev/shm</span><br></pre></td></tr></table></figure>

<p><strong>ğŸ³nerdctl exec</strong></p>
<p>åŒæ ·ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>exec</code> å‘½ä»¤æ‰§è¡Œå®¹å™¨ç›¸å…³å‘½ä»¤ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ nerdctl exec -it nginx /bin/sh</span><br><span class="line">/ # date</span><br><span class="line">Thu Aug 19 06:43:19 UTC 2021</span><br><span class="line">/ #</span><br></pre></td></tr></table></figure>

<h3 id="å®¹å™¨ç®¡ç†"><a href="#å®¹å™¨ç®¡ç†" class="headerlink" title="å®¹å™¨ç®¡ç†"></a>å®¹å™¨ç®¡ç†</h3><p><strong>ğŸ³nerdctl ps</strong>ï¼šåˆ—å‡ºå®¹å™¨</p>
<p>ä½¿ç”¨ <code>nerdctl ps</code> å‘½ä»¤å¯ä»¥åˆ—å‡ºæ‰€æœ‰å®¹å™¨ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ nerdctl ps</span><br><span class="line">CONTAINER ID    IMAGE                             COMMAND                   CREATED           STATUS    PORTS                 NAMES</span><br><span class="line">6e489777d2f7    docker.io/library/nginx:alpine    &quot;/docker-entrypoint.â€¦&quot;    10 minutes ago    Up        0.0.0.0:80-&gt;80/tcp    nginx</span><br></pre></td></tr></table></figure>

<p>åŒæ ·å¯ä»¥ä½¿ç”¨ <code>-a</code> é€‰é¡¹æ˜¾ç¤ºæ‰€æœ‰çš„å®¹å™¨åˆ—è¡¨ï¼Œé»˜è®¤åªæ˜¾ç¤ºæ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼Œä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ <code>nerdctl ps</code> å‘½ä»¤å¹¶æ²¡æœ‰å®ç° <code>docker ps</code> ä¸‹é¢çš„ <code>--filter</code>ã€<code>--format</code>ã€<code>--last</code>ã€<code>--size</code> ç­‰é€‰é¡¹ã€‚</p>
<p><strong>ğŸ³nerdctl inspect</strong>ï¼šè·å–å®¹å™¨çš„è¯¦ç»†ä¿¡æ¯ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ nerdctl inspect nginx</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;Id&quot;: &quot;6e489777d2f73dda8a310cdf8da9df38353c1aa2021d3c2270b30eff1806bcf8&quot;,</span><br><span class="line">        &quot;Created&quot;: &quot;2021-08-19T06:35:46.403464674Z&quot;,</span><br><span class="line">        &quot;Path&quot;: &quot;/docker-entrypoint.sh&quot;,</span><br><span class="line">        &quot;Args&quot;: [</span><br><span class="line">            &quot;nginx&quot;,</span><br><span class="line">            &quot;-g&quot;,</span><br><span class="line">            &quot;daemon off;&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;State&quot;: &#123;</span><br><span class="line">            &quot;Status&quot;: &quot;running&quot;,</span><br><span class="line">            &quot;Running&quot;: true,</span><br><span class="line">            &quot;Paused&quot;: false,</span><br><span class="line">            &quot;Pid&quot;: 2002,</span><br><span class="line">            &quot;ExitCode&quot;: 0,</span><br><span class="line">            &quot;FinishedAt&quot;: &quot;0001-01-01T00:00:00Z&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Image&quot;: &quot;docker.io/library/nginx:alpine&quot;,</span><br><span class="line">        &quot;ResolvConfPath&quot;: &quot;/var/lib/nerdctl/1935db59/containers/default/6e489777d2f73dda8a310cdf8da9df38353c1aa2021d3c2270b30eff1806bcf8/resolv.conf&quot;,</span><br><span class="line">        &quot;LogPath&quot;: &quot;/var/lib/nerdctl/1935db59/containers/default/6e489777d2f73dda8a310cdf8da9df38353c1aa2021d3c2270b30eff1806bcf8/6e489777d2f73dda8a310cdf8da9df38353c1aa2021d3c2270b30eff1806bcf8-json.log&quot;,</span><br><span class="line">        &quot;Name&quot;: &quot;nginx&quot;,</span><br><span class="line">        &quot;Driver&quot;: &quot;overlayfs&quot;,</span><br><span class="line">        &quot;Platform&quot;: &quot;linux&quot;,</span><br><span class="line">        &quot;AppArmorProfile&quot;: &quot;nerdctl-default&quot;,</span><br><span class="line">        &quot;NetworkSettings&quot;: &#123;</span><br><span class="line">            &quot;Ports&quot;: &#123;</span><br><span class="line">                &quot;80/tcp&quot;: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;HostIp&quot;: &quot;0.0.0.0&quot;,</span><br><span class="line">                        &quot;HostPort&quot;: &quot;80&quot;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class="line">            &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class="line">            &quot;IPAddress&quot;: &quot;10.4.0.3&quot;,</span><br><span class="line">            &quot;IPPrefixLen&quot;: 24,</span><br><span class="line">            &quot;MacAddress&quot;: &quot;f2:b1:8e:a2:fe:18&quot;,</span><br><span class="line">            &quot;Networks&quot;: &#123;</span><br><span class="line">                &quot;unknown-eth0&quot;: &#123;</span><br><span class="line">                    &quot;IPAddress&quot;: &quot;10.4.0.3&quot;,</span><br><span class="line">                    &quot;IPPrefixLen&quot;: 24,</span><br><span class="line">                    &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class="line">                    &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class="line">                    &quot;MacAddress&quot;: &quot;f2:b1:8e:a2:fe:18&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°æ˜¾ç¤ºç»“æœå’Œ <code>docker inspect</code> ä¹ŸåŸºæœ¬ä¸€è‡´çš„ã€‚</p>
<p><strong>ğŸ³nerdctl logs</strong>ï¼šè·å–å®¹å™¨æ—¥å¿—</p>
<p>æŸ¥çœ‹å®¹å™¨æ—¥å¿—æ˜¯æˆ‘ä»¬å¹³æ—¶ç»å¸¸ä¼šä½¿ç”¨åˆ°çš„ä¸€ä¸ªåŠŸèƒ½ï¼ŒåŒæ ·æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>nerdctl logs</code> æ¥è·å–æ—¥å¿—æ•°æ®ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ nerdctl logs -f nginx</span><br><span class="line">......</span><br><span class="line">2021/08/19 06:35:46 [notice] 1#1: start worker processes</span><br><span class="line">2021/08/19 06:35:46 [notice] 1#1: start worker process 32</span><br><span class="line">2021/08/19 06:35:46 [notice] 1#1: start worker process 33</span><br></pre></td></tr></table></figure>

<p>åŒæ ·æ”¯æŒ <code>-f</code>ã€<code>-t</code>ã€<code>-n</code>ã€<code>--since</code>ã€<code>--until</code> è¿™äº›é€‰é¡¹ã€‚</p>
<p><strong>ğŸ³nerdctl stop</strong>ï¼šåœæ­¢å®¹å™¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ nerdctl stop nginx</span><br><span class="line">nginx</span><br><span class="line">âœ  ~ nerdctl ps</span><br><span class="line">CONTAINER ID    IMAGE    COMMAND    CREATED    STATUS    PORTS    NAMES</span><br><span class="line">âœ  ~ nerdctl ps -a</span><br><span class="line">CONTAINER ID    IMAGE                             COMMAND                   CREATED           STATUS    PORTS                 NAMES</span><br><span class="line">6e489777d2f7    docker.io/library/nginx:alpine    &quot;/docker-entrypoint.â€¦&quot;    20 minutes ago    Up        0.0.0.0:80-&gt;80/tcp    nginx</span><br></pre></td></tr></table></figure>

<p><strong>ğŸ³nerdctl rm</strong>ï¼šåˆ é™¤å®¹å™¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ nerdctl rm nginx</span><br><span class="line">You cannot remove a running container f4ac170235595f28bf962bad68aa81b20fc83b741751e7f3355bd77d8016462d. Stop the container before attempting removal or force remove</span><br><span class="line">âœ  ~ nerdctl rm -f ginx</span><br><span class="line">nginx</span><br><span class="line">âœ  ~ nerdctl ps</span><br><span class="line">CONTAINER ID    IMAGE    COMMAND    CREATED    STATUS    PORTS    NAMES</span><br></pre></td></tr></table></figure>

<p>è¦å¼ºåˆ¶åˆ é™¤åŒæ ·å¯ä»¥ä½¿ç”¨ <code>-f</code> æˆ– <code>--force</code> é€‰é¡¹æ¥æ“ä½œã€‚</p>
<h3 id="é•œåƒç®¡ç†"><a href="#é•œåƒç®¡ç†" class="headerlink" title="é•œåƒç®¡ç†"></a>é•œåƒç®¡ç†</h3><p><strong>ğŸ³nerdctl images</strong>ï¼šé•œåƒåˆ—è¡¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ nerdctl images</span><br><span class="line">REPOSITORY    TAG       IMAGE ID        CREATED           SIZE</span><br><span class="line">alpine        latest    eb3e4e175ba6    6 days ago        5.9 MiB</span><br><span class="line">nginx         alpine    bead42240255    29 minutes ago    16.0 KiB</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿéœ€è¦æ³¨æ„çš„æ˜¯æ²¡æœ‰å®ç° <code>docker images</code> çš„ä¸€äº›é€‰é¡¹ï¼Œæ¯”å¦‚ <code>--all</code>ã€<code>--digests</code>ã€<code>--filter</code>ã€<code>--format</code>ã€‚</p>
<p><strong>ğŸ³nerdctl pull</strong>ï¼šæ‹‰å–é•œåƒ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ docker.io/library/busybox:latest:</span><br><span class="line">resolved       |++++++++++++++++++++++++++++++++++++++|</span><br><span class="line">index-sha256:0f354ec1728d9ff32edcd7d1b8bbdfc798277ad36120dc3dc683be44524c8b60:    done           |++++++++++++++++++++++++++++++++++++++| manifest-sha256:dca71257cd2e72840a21f0323234bb2e33fea6d949fa0f21c5102146f583486b: done           |++++++++++++++++++++++++++++++++++++++| config-sha256:69593048aa3acfee0f75f20b77acb549de2472063053f6730c4091b53f2dfb02:   done           |++++++++++++++++++++++++++++++++++++++| layer-sha256:b71f96345d44b237decc0c2d6c2f9ad0d17fde83dad7579608f1f0764d9686f2:    done           |++++++++++++++++++++++++++++++++++++++| elapsed: 5.9 s                                                                    total:  752.8  (127.5 KiB/s)</span><br></pre></td></tr></table></figure>

<p><strong>ğŸ³nerdctl push</strong>ï¼šæ¨é€é•œåƒ</p>
<p>å½“ç„¶åœ¨æ¨é€é•œåƒä¹‹å‰ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>nerdctl login</code> å‘½ä»¤ç™»å½•åˆ°é•œåƒä»“åº“ï¼Œç„¶åå†æ‰§è¡Œ push æ“ä½œã€‚</p>
<p>å¯ä»¥ä½¿ç”¨ <code>nerdctl login --username xxx --password xxx</code> è¿›è¡Œç™»å½•ï¼Œä½¿ç”¨ <code>nerdctl logout</code> å¯ä»¥æ³¨é”€é€€å‡ºç™»å½•ã€‚</p>
<p><strong>ğŸ³nerdctl tag</strong>ï¼šé•œåƒæ ‡ç­¾</p>
<p>ä½¿ç”¨ <code>tag</code> å‘½ä»¤å¯ä»¥ä¸ºä¸€ä¸ªé•œåƒåˆ›å»ºä¸€ä¸ªåˆ«åé•œåƒï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ nerdctl images</span><br><span class="line">REPOSITORY    TAG                  IMAGE ID        CREATED           SIZE</span><br><span class="line">busybox       latest               0f354ec1728d    6 minutes ago     1.3 MiB</span><br><span class="line">nginx         alpine               bead42240255    41 minutes ago    16.0 KiB</span><br><span class="line">âœ  ~ nerdctl tag nginx:alpine harbor.k8s.local/course/nginx:alpine</span><br><span class="line">âœ  ~ nerdctl images</span><br><span class="line">REPOSITORY                       TAG                  IMAGE ID        CREATED           SIZE</span><br><span class="line">busybox                          latest               0f354ec1728d    7 minutes ago     1.3 MiB</span><br><span class="line">nginx                            alpine               bead42240255    41 minutes ago    16.0 KiB</span><br><span class="line">harbor.k8s.local/course/nginx    alpine               bead42240255    2 seconds ago     16.0 KiB</span><br></pre></td></tr></table></figure>

<p><strong>ğŸ³nerdctl save</strong>ï¼šå¯¼å‡ºé•œåƒ</p>
<p>ä½¿ç”¨ <code>save</code> å‘½ä»¤å¯ä»¥å¯¼å‡ºé•œåƒä¸ºä¸€ä¸ª <code>tar</code> å‹ç¼©åŒ…ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ nerdctl save -o busybox.tar.gz busybox:latest</span><br><span class="line">âœ  ~ ls -lh busybox.tar.gz</span><br><span class="line">-rw-r--r-- 1 root root 761K Aug 19 15:19 busybox.tar.gz</span><br></pre></td></tr></table></figure>

<p><strong>ğŸ³nerdctl rmi</strong>ï¼šåˆ é™¤é•œåƒ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ nerdctl rmi busybox</span><br><span class="line">Untagged: docker.io/library/busybox:latest@sha256:0f354ec1728d9ff32edcd7d1b8bbdfc798277ad36120dc3dc683be44524c8b60</span><br><span class="line">Deleted: sha256:5b8c72934dfc08c7d2bd707e93197550f06c0751023dabb3a045b723c5e7b373</span><br></pre></td></tr></table></figure>

<p><strong>ğŸ³nerdctl load</strong>ï¼šå¯¼å…¥é•œåƒ</p>
<p>ä½¿ç”¨ <code>load</code> å‘½ä»¤å¯ä»¥å°†ä¸Šé¢å¯¼å‡ºçš„é•œåƒå†æ¬¡å¯¼å…¥ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ nerdctl load -i busybox.tar.gz</span><br><span class="line">unpacking docker.io/library/busybox:latest (sha256:0f354ec1728d9ff32edcd7d1b8bbdfc798277ad36120dc3dc683be44524c8b60)...done</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ <code>-i</code> æˆ– <code>--input</code> é€‰é¡¹æŒ‡å®šéœ€è¦å¯¼å…¥çš„å‹ç¼©åŒ…ã€‚</p>
<h3 id="é•œåƒæ„å»º"><a href="#é•œåƒæ„å»º" class="headerlink" title="é•œåƒæ„å»º"></a>é•œåƒæ„å»º</h3><p>é•œåƒæ„å»ºæ˜¯å¹³æ—¶æˆ‘ä»¬éå¸¸é‡è¦çš„ä¸€ä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬çŸ¥é“ <code>ctr</code> å¹¶æ²¡æœ‰æ„å»ºé•œåƒçš„å‘½ä»¤ï¼Œè€Œç°åœ¨æˆ‘ä»¬åˆä¸ä½¿ç”¨ Docker äº†ï¼Œé‚£ä¹ˆå¦‚ä½•è¿›è¡Œé•œåƒæ„å»ºäº†ï¼Œå¹¸è¿çš„æ˜¯ <code>nerdctl</code> å°±æä¾›äº† <code>nerdctl build</code> è¿™æ ·çš„é•œåƒæ„å»ºå‘½ä»¤ã€‚</p>
<p><strong>ğŸ³nerdctl build</strong>ï¼šä» Dockerfile æ„å»ºé•œåƒ</p>
<p>æ¯”å¦‚ç°åœ¨æˆ‘ä»¬å®šåˆ¶ä¸€ä¸ª nginx é•œåƒï¼Œæ–°å»ºä¸€ä¸ªå¦‚ä¸‹æ‰€ç¤ºçš„ Dockerfile æ–‡ä»¶ï¼š</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> nginx</span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">echo</span> <span class="string">&#x27;Hello Nerdctl From Containerd&#x27;</span> &gt; /usr/share/nginx/html/index.html</span></span><br></pre></td></tr></table></figure>

<p>ç„¶ååœ¨æ–‡ä»¶æ‰€åœ¨ç›®å½•æ‰§è¡Œé•œåƒæ„å»ºå‘½ä»¤ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ nerdctl build -t nginx:nerdctl -f Dockerfile .</span><br><span class="line">FATA[0000] `buildctl` needs to be installed and `buildkitd` needs to be running, see https://github.com/moby/buildkit: exec: &quot;buildctl&quot;: executable file not found in $PATH</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªé”™è¯¯æç¤ºï¼Œéœ€è¦æˆ‘ä»¬å®‰è£… <code>buildctl</code> å¹¶è¿è¡Œ <code>buildkitd</code>ï¼Œè¿™æ˜¯å› ä¸º <code>nerdctl build</code> éœ€è¦ä¾èµ– <code>buildkit</code> å·¥å…·ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://github.com/moby/buildkit">buildkit</a> é¡¹ç›®ä¹Ÿæ˜¯ Docker å…¬å¸å¼€æºçš„ä¸€ä¸ªæ„å»ºå·¥å…·åŒ…ï¼Œæ”¯æŒ OCI æ ‡å‡†çš„é•œåƒæ„å»ºã€‚å®ƒä¸»è¦åŒ…å«ä»¥ä¸‹éƒ¨åˆ†:</p>
<ul>
<li>æœåŠ¡ç«¯ <code>buildkitd</code>ï¼šå½“å‰æ”¯æŒ runc å’Œ containerd ä½œä¸º workerï¼Œé»˜è®¤æ˜¯ runcï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨ containerd</li>
<li>å®¢æˆ·ç«¯ <code>buildctl</code>ï¼šè´Ÿè´£è§£æ Dockerfileï¼Œå¹¶å‘æœåŠ¡ç«¯ buildkitd å‘å‡ºæ„å»ºè¯·æ±‚</li>
</ul>
<p>buildkit æ˜¯å…¸å‹çš„ C&#x2F;S æ¶æ„ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ˜¯å¯ä»¥ä¸åœ¨ä¸€å°æœåŠ¡å™¨ä¸Šï¼Œè€Œ <code>nerdctl</code> åœ¨æ„å»ºé•œåƒçš„æ—¶å€™ä¹Ÿä½œä¸º <code>buildkitd</code> çš„å®¢æˆ·ç«¯ï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬å®‰è£…å¹¶è¿è¡Œ <code>buildkitd</code>ã€‚</p>
<p>æ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬å…ˆæ¥å®‰è£… <code>buildkit</code>ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ wget https://github.com/moby/buildkit/releases/download/v0.9.1/buildkit-v0.9.1.linux-amd64.tar.gz</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¦‚æœæœ‰é™åˆ¶ï¼Œä¹Ÿå¯ä»¥æ›¿æ¢æˆä¸‹é¢çš„ URL åŠ é€Ÿä¸‹è½½</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">wget https://download.fastgit.org/moby/buildkit/releases/download/v0.9.1/buildkit-v0.9.1.linux-amd64.tar.gz</span></span><br><span class="line">âœ  ~ tar -zxvf buildkit-v0.9.1.linux-amd64.tar.gz -C /usr/local/containerd/</span><br><span class="line">bin/</span><br><span class="line">bin/buildctl</span><br><span class="line">bin/buildkit-qemu-aarch64</span><br><span class="line">bin/buildkit-qemu-arm</span><br><span class="line">bin/buildkit-qemu-i386</span><br><span class="line">bin/buildkit-qemu-mips64</span><br><span class="line">bin/buildkit-qemu-mips64el</span><br><span class="line">bin/buildkit-qemu-ppc64le</span><br><span class="line">bin/buildkit-qemu-riscv64</span><br><span class="line">bin/buildkit-qemu-s390x</span><br><span class="line">bin/buildkit-runc</span><br><span class="line">bin/buildkitd</span><br><span class="line">âœ  ~ ln -s /usr/local/containerd/bin/buildkitd /usr/local/bin/buildkitd</span><br><span class="line">âœ  ~ ln -s /usr/local/containerd/bin/buildctl /usr/local/bin/buildctl</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ Systemd æ¥ç®¡ç† <code>buildkitd</code>ï¼Œåˆ›å»ºå¦‚ä¸‹æ‰€ç¤ºçš„ <code>systemd unit</code> æ–‡ä»¶ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ cat /etc/systemd/system/buildkit.service</span><br><span class="line">[Unit]</span><br><span class="line">Description=BuildKit</span><br><span class="line">Documentation=https://github.com/moby/buildkit</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">ExecStart=/usr/local/bin/buildkitd --oci-worker=false --containerd-worker=true</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<p>ç„¶åå¯åŠ¨ <code>buildkitd</code>ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ systemctl daemon-reload</span><br><span class="line">âœ  ~ systemctl enable buildkit --now</span><br><span class="line">Created symlink /etc/systemd/system/multi-user.target.wants/buildkit.service â†’ /etc/systemd/system/buildkit.service.</span><br><span class="line">âœ  ~ systemctl status buildkit</span><br><span class="line">â— buildkit.service - BuildKit</span><br><span class="line">     Loaded: loaded (/etc/systemd/system/buildkit.service; enabled; vendor preset: enabled)</span><br><span class="line">     Memory: 8.6M</span><br><span class="line">     CGroup: /system.slice/buildkit.service</span><br><span class="line">             â””â”€5779 /usr/local/bin/buildkitd --oci-worker=false --containerd-worker=true</span><br><span class="line"></span><br><span class="line">Aug 19 16:03:10 ydzsio systemd[1]: Started BuildKit.</span><br><span class="line">Aug 19 16:03:10 ydzsio buildkitd[5779]: time=&quot;2021-08-19T16:03:10+08:00&quot; level=warning msg=&quot;using host network as the default&quot;</span><br><span class="line">Aug 19 16:03:10 ydzsio buildkitd[5779]: time=&quot;2021-08-19T16:03:10+08:00&quot; level=info msg=&quot;found worker \&quot;euznuelxhxb689bc5of7pxmbc\&quot;, labels&gt;</span><br><span class="line">Aug 19 16:03:10 ydzsio buildkitd[5779]: time=&quot;2021-08-19T16:03:10+08:00&quot; level=info msg=&quot;found 1 workers, default=\&quot;euznuelxhxb689bc5of7pxm&gt;</span><br><span class="line">Aug 19 16:03:10 ydzsio buildkitd[5779]: time=&quot;2021-08-19T16:03:10+08:00&quot; level=warning msg=&quot;currently, only the default worker can be used.&quot;</span><br><span class="line">Aug 19 16:03:10 ydzsio buildkitd[5779]: time=&quot;2021-08-19T16:03:10+08:00&quot; level=info msg=&quot;running server on /run/buildkit/buildkitd.sock&quot;</span><br><span class="line">~</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨æˆ‘ä»¬å†æ¥é‡æ–°æ„å»ºé•œåƒï¼š</p>
<p><img data-src="https://mudutestmenu.mudu.tv/upload/7oga7u.png" alt="nerdctl æ„å»ºé•œåƒ"></p>
<p>æ„å»ºå®ŒæˆåæŸ¥çœ‹é•œåƒæ˜¯å¦æ„å»ºæˆåŠŸï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ nerdctl images</span><br><span class="line">WARN[0000] unparsable image name &quot;overlayfs@sha256:d5b9b9e4c930f30340650cb373f62f97c93ee3b92c83f01c6e00b7b87d62c624&quot;</span><br><span class="line">REPOSITORY    TAG        IMAGE ID        CREATED               SIZE</span><br><span class="line">nginx         latest     4d4d96ac750a    4 minutes ago         16.0 KiB</span><br><span class="line">nginx         nerdctl    d5b9b9e4c930    About a minute ago    24.0 KiB</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å·²ç»æœ‰æˆ‘ä»¬æ„å»ºçš„ <code>nginx:nerdctl</code> é•œåƒäº†ã€‚æ¥ä¸‹æ¥ä½¿ç”¨ä¸Šé¢æˆ‘ä»¬æ„å»ºçš„é•œåƒæ¥å¯åŠ¨ä¸€ä¸ªå®¹å™¨è¿›è¡Œæµ‹è¯•ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ nerdctl run -d -p 80:80 --name=nginx --restart=always nginx:nerdctl</span><br><span class="line">f8f639cb667926023231b13584226b2c7b856847e0a25bd5f686b9a6e7e3cacd</span><br><span class="line">âœ  ~ nerdctl ps</span><br><span class="line">CONTAINER ID    IMAGE                              COMMAND                   CREATED         STATUS    PORTS                 NAMES</span><br><span class="line">f8f639cb6679    docker.io/library/nginx:nerdctl    &quot;/docker-entrypoint.â€¦&quot;    1 second ago    Up        0.0.0.0:80-&gt;80/tcp    nginx</span><br><span class="line">âœ  ~ curl localhost</span><br><span class="line">This is a nerdctl build&#x27;s nginx image base on containerd</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·æˆ‘ä»¬å°±ä½¿ç”¨ <code>nerdctl + buildkitd</code> è½»æ¾å®Œæˆäº†å®¹å™¨é•œåƒçš„æ„å»ºã€‚</p>
<p>å½“ç„¶å¦‚æœä½ è¿˜æƒ³åœ¨å•æœºç¯å¢ƒä¸‹ä½¿ç”¨ Docker Composeï¼Œåœ¨ containerd æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>nerdctl</code> æ¥å…¼å®¹è¯¥åŠŸèƒ½ã€‚åŒæ ·æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>nerdctl compose</code>ã€<code>nerdctl compose up</code>ã€<code>nerdctl compose logs</code>ã€<code>nerdctl compose build</code>ã€<code>nerdctl compose down</code> ç­‰å‘½ä»¤æ¥ç®¡ç† Compose æœåŠ¡ã€‚è¿™æ ·ä½¿ç”¨ containerdã€nerdctl ç»“åˆ buildkit ç­‰å·¥å…·å°±å®Œå…¨å¯ä»¥æ›¿ä»£ docker åœ¨é•œåƒæ„å»ºã€é•œåƒå®¹å™¨æ–¹é¢çš„ç®¡ç†åŠŸèƒ½äº†ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://docs.youdianzhishi.com/k8s/runtime/usage/">
</a></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E8%BF%90%E7%BB%B4/" rel="tag"># è¿ç»´</a>
              <a href="/tags/k8s/" rel="tag"># k8s</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2025/09/11/Cookie%E3%80%81Session%20%E5%92%8C%20Token%20/" rel="prev" title="Cookieã€Session å’Œ Token">
      <i class="fa fa-chevron-left"></i> Cookieã€Session å’Œ Token
    </a></div>
      <div class="post-nav-item">
    <a href="/2025/09/11/Consule%20%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0/" rel="next" title="Consule æœåŠ¡å‘ç°">
      Consule æœåŠ¡å‘ç° <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Containerd-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7-nerdctl"><span class="nav-number">1.</span> <span class="nav-text">Containerd å‘½ä»¤è¡Œå·¥å…· nerdctl</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-number">1.1.</span> <span class="nav-text">å®‰è£…</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4"><span class="nav-number">1.2.</span> <span class="nav-text">å‘½ä»¤</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Run-Exec"><span class="nav-number">1.2.1.</span> <span class="nav-text">Run&amp;Exec</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%B9%E5%99%A8%E7%AE%A1%E7%90%86"><span class="nav-number">1.2.2.</span> <span class="nav-text">å®¹å™¨ç®¡ç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%95%9C%E5%83%8F%E7%AE%A1%E7%90%86"><span class="nav-number">1.2.3.</span> <span class="nav-text">é•œåƒç®¡ç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA"><span class="nav-number">1.2.4.</span> <span class="nav-text">é•œåƒæ„å»º</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">å…­ä¸€</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">273</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">44</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/huiaz" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;huiaz" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">å…­ä¸€</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">1.7m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">25:34</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true}});</script></body>
</html>
