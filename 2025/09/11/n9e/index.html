<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>n9e | Hui's Blog</title><meta name="author" content="六一"><meta name="copyright" content="六一"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="123n9e_v87vfwNNFsGPAYcheujZUy    1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980version: &quot;3">
<meta property="og:type" content="article">
<meta property="og:title" content="n9e">
<meta property="og:url" content="http://example.com/2025/09/11/n9e/index.html">
<meta property="og:site_name" content="Hui&#39;s Blog">
<meta property="og:description" content="123n9e_v87vfwNNFsGPAYcheujZUy    1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980version: &quot;3">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/butterfly-icon.png">
<meta property="article:published_time" content="2025-09-11T12:32:34.000Z">
<meta property="article:modified_time" content="2025-09-11T13:49:59.721Z">
<meta property="article:author" content="六一">
<meta property="article:tag" content="运维">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/butterfly-icon.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "n9e",
  "url": "http://example.com/2025/09/11/n9e/",
  "image": "http://example.com/img/butterfly-icon.png",
  "datePublished": "2025-09-11T12:32:34.000Z",
  "dateModified": "2025-09-11T13:49:59.721Z",
  "author": [
    {
      "@type": "Person",
      "name": "六一",
      "url": "http://example.com"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2025/09/11/n9e/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.4"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.13.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'n9e',
  isHighlightShrink: false,
  isToc: false,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">274</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">22</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">45</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Hui's Blog</span></a><a class="nav-page-title" href="/"><span class="site-name">n9e</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> About</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">n9e</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-09-11T12:32:34.000Z" title="发表于 2025-09-11 20:32:34">2025-09-11</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-09-11T13:49:59.721Z" title="更新于 2025-09-11 21:49:59">2025-09-11</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/n9e/">n9e</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">n9e_v8</span></span><br><span class="line"></span><br><span class="line">7vfwNNFsGPAYcheujZUy  </span><br></pre></td></tr></table></figure>

<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">version:</span> <span class="string">&quot;3.7&quot;</span></span><br><span class="line"><span class="symbol"></span></span><br><span class="line"><span class="symbol">services:</span></span><br><span class="line"><span class="symbol">  mysql:</span></span><br><span class="line"><span class="symbol">    image:</span> <span class="string">&quot;mysql:8&quot;</span></span><br><span class="line"><span class="symbol">    container_name:</span> mysql</span><br><span class="line"><span class="symbol">    hostname:</span> mysql</span><br><span class="line"><span class="symbol">    restart:</span> always</span><br><span class="line"><span class="symbol">    environment:</span></span><br><span class="line"><span class="symbol">      TZ:</span> Asia/Shanghai</span><br><span class="line"><span class="symbol">      MYSQL_ROOT_PASSWORD:</span> <span class="number">1234</span></span><br><span class="line"><span class="symbol">    volumes:</span></span><br><span class="line">      - ./mysqldata:<span class="keyword">/var/</span>lib<span class="keyword">/mysql/</span></span><br><span class="line">      - ../initsql:/docker-entrypoint-initdb.d/</span><br><span class="line">      - .<span class="keyword">/etc-mysql/</span>my.cnf:<span class="keyword">/etc/</span>my.cnf</span><br><span class="line"><span class="symbol">    network_mode:</span> host</span><br><span class="line"><span class="symbol"></span></span><br><span class="line"><span class="symbol">  redis:</span></span><br><span class="line"><span class="symbol">    image:</span> <span class="string">&quot;redis:6.2&quot;</span></span><br><span class="line"><span class="symbol">    container_name:</span> redis</span><br><span class="line"><span class="symbol">    hostname:</span> redis</span><br><span class="line"><span class="symbol">    restart:</span> always</span><br><span class="line"><span class="symbol">    environment:</span></span><br><span class="line"><span class="symbol">      TZ:</span> Asia/Shanghai</span><br><span class="line"><span class="symbol">    network_mode:</span> host</span><br><span class="line"><span class="symbol"></span></span><br><span class="line"><span class="symbol">  prometheus:</span></span><br><span class="line"><span class="symbol">    image:</span> prom/prometheus:v2<span class="number">.55</span><span class="number">.1</span></span><br><span class="line"><span class="symbol">    container_name:</span> prometheus</span><br><span class="line"><span class="symbol">    hostname:</span> prometheus</span><br><span class="line"><span class="symbol">    restart:</span> always</span><br><span class="line"><span class="symbol">    environment:</span></span><br><span class="line"><span class="symbol">      TZ:</span> Asia/Shanghai</span><br><span class="line"><span class="symbol">    volumes:</span></span><br><span class="line">      - ./etc-prometheus:<span class="keyword">/etc/</span>prometheus</span><br><span class="line"><span class="symbol">    network_mode:</span> host</span><br><span class="line"><span class="symbol">    command:</span></span><br><span class="line">      - <span class="string">&quot;--config.file=/etc/prometheus/prometheus.yml&quot;</span></span><br><span class="line">      - <span class="string">&quot;--storage.tsdb.path=/prometheus&quot;</span></span><br><span class="line">      - <span class="string">&quot;--web.console.libraries=/usr/share/prometheus/console_libraries&quot;</span></span><br><span class="line">      - <span class="string">&quot;--web.console.templates=/usr/share/prometheus/consoles&quot;</span></span><br><span class="line">      - <span class="string">&quot;--enable-feature=remote-write-receiver&quot;</span></span><br><span class="line">      - <span class="string">&quot;--query.lookback-delta=2m&quot;</span></span><br><span class="line"><span class="symbol"></span></span><br><span class="line"><span class="symbol">  n9e:</span></span><br><span class="line"><span class="symbol">    image:</span> flashcatcloud/nightingale:latest</span><br><span class="line"><span class="symbol">    container_name:</span> n9e</span><br><span class="line"><span class="symbol">    hostname:</span> n9e</span><br><span class="line"><span class="symbol">    restart:</span> always</span><br><span class="line"><span class="symbol">    environment:</span></span><br><span class="line"><span class="symbol">      GIN_MODE:</span> release</span><br><span class="line"><span class="symbol">      TZ:</span> Asia/Shanghai</span><br><span class="line"><span class="symbol">      WAIT_HOSTS:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">3306</span>, <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span></span><br><span class="line"><span class="symbol">    volumes:</span></span><br><span class="line">      - ./etc-nightingale:<span class="keyword">/app/</span>etc</span><br><span class="line"><span class="symbol">    network_mode:</span> host</span><br><span class="line"><span class="symbol">    depends_on:</span></span><br><span class="line">      - mysql</span><br><span class="line">      - redis</span><br><span class="line">      - prometheus</span><br><span class="line"><span class="symbol">    command:</span> &gt;</span><br><span class="line">      sh -c <span class="string">&quot;/app/n9e&quot;</span></span><br><span class="line"><span class="symbol"></span></span><br><span class="line"><span class="symbol">  categraf:</span></span><br><span class="line"><span class="symbol">    image:</span> <span class="string">&quot;flashcatcloud/categraf:latest&quot;</span></span><br><span class="line"><span class="symbol">    container_name:</span> <span class="string">&quot;categraf&quot;</span></span><br><span class="line"><span class="symbol">    hostname:</span> <span class="string">&quot;categraf01&quot;</span></span><br><span class="line"><span class="symbol">    restart:</span> always</span><br><span class="line"><span class="symbol">    environment:</span></span><br><span class="line"><span class="symbol">      TZ:</span> Asia/Shanghai</span><br><span class="line"><span class="symbol">      HOST_PROC:</span> <span class="keyword">/hostfs/</span>proc</span><br><span class="line"><span class="symbol">      HOST_SYS:</span> <span class="keyword">/hostfs/</span>sys</span><br><span class="line"><span class="symbol">      HOST_MOUNT_PREFIX:</span> /hostfs</span><br><span class="line"><span class="symbol">      WAIT_HOSTS:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">17000</span>, <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">20090</span></span><br><span class="line"><span class="symbol">    volumes:</span></span><br><span class="line">      - ./etc-categraf:<span class="keyword">/etc/</span>categraf/conf</span><br><span class="line">      - /:/hostfs</span><br><span class="line"><span class="symbol">    network_mode:</span> host</span><br><span class="line"><span class="symbol">    depends_on:</span></span><br><span class="line">      - n9e</span><br></pre></td></tr></table></figure>

<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">version:</span> <span class="string">&quot;3.7&quot;</span></span><br><span class="line"><span class="symbol"></span></span><br><span class="line"><span class="symbol">services:</span></span><br><span class="line"><span class="symbol">  n9e:</span></span><br><span class="line"><span class="symbol">    image:</span> muduregistry.tencentcloudcr.com<span class="keyword">/ops/</span>nightingale:v8<span class="number">.0</span><span class="number">.0</span>-beta<span class="number">.14</span></span><br><span class="line"><span class="symbol">    container_name:</span> n9e</span><br><span class="line"><span class="symbol">    hostname:</span> n9e</span><br><span class="line"><span class="symbol">    restart:</span> always</span><br><span class="line"><span class="symbol">    environment:</span></span><br><span class="line"><span class="symbol">      GIN_MODE:</span> release</span><br><span class="line"><span class="symbol">      TZ:</span> Asia/Shanghai</span><br><span class="line"><span class="symbol">      WAIT_HOSTS:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">3306</span>, <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span></span><br><span class="line"><span class="symbol">    volumes:</span></span><br><span class="line">      - ./etc-nightingale:<span class="keyword">/app/</span>etc</span><br><span class="line"><span class="symbol">    network_mode:</span> host</span><br><span class="line"><span class="symbol">    command:</span> &gt;</span><br><span class="line">      sh -c <span class="string">&quot;/app/n9e&quot;</span></span><br><span class="line"><span class="symbol"></span></span><br><span class="line"><span class="symbol">  categraf:</span></span><br><span class="line"><span class="symbol">    image:</span> <span class="string">&quot;muduregistry.tencentcloudcr.com/ops/categraf:v0.4.12&quot;</span></span><br><span class="line"><span class="symbol">    container_name:</span> <span class="string">&quot;categraf&quot;</span></span><br><span class="line"><span class="symbol">    hostname:</span> <span class="string">&quot;categraf01&quot;</span></span><br><span class="line"><span class="symbol">    restart:</span> always</span><br><span class="line"><span class="symbol">    environment:</span></span><br><span class="line"><span class="symbol">      TZ:</span> Asia/Shanghai</span><br><span class="line"><span class="symbol">      HOST_PROC:</span> <span class="keyword">/hostfs/</span>proc</span><br><span class="line"><span class="symbol">      HOST_SYS:</span> <span class="keyword">/hostfs/</span>sys</span><br><span class="line"><span class="symbol">      HOST_MOUNT_PREFIX:</span> /hostfs</span><br><span class="line"><span class="symbol">      WAIT_HOSTS:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">17000</span>, <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">20090</span></span><br><span class="line"><span class="symbol">    volumes:</span></span><br><span class="line">      - ./etc-categraf:<span class="keyword">/etc/</span>categraf/conf</span><br><span class="line">      - /:/hostfs</span><br><span class="line"><span class="symbol">    network_mode:</span> host</span><br><span class="line"><span class="symbol">    depends_on:</span></span><br><span class="line">      - n9e</span><br></pre></td></tr></table></figure>



<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">[Global]</span></span><br><span class="line"><span class="attr">RunMode</span> = <span class="string">&quot;release&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[Log]</span></span><br><span class="line"><span class="comment"># log write dir</span></span><br><span class="line"><span class="attr">Dir</span> = <span class="string">&quot;logs&quot;</span></span><br><span class="line"><span class="comment"># log level: DEBUG INFO WARNING ERROR</span></span><br><span class="line"><span class="attr">Level</span> = <span class="string">&quot;INFO&quot;</span></span><br><span class="line"><span class="comment"># stdout, stderr, file</span></span><br><span class="line"><span class="attr">Output</span> = <span class="string">&quot;stdout&quot;</span></span><br><span class="line"><span class="comment"># # rotate by time</span></span><br><span class="line"><span class="comment"># KeepHours = 4</span></span><br><span class="line"><span class="comment"># # rotate by size</span></span><br><span class="line"><span class="comment"># RotateNum = 3</span></span><br><span class="line"><span class="comment"># # unit: MB</span></span><br><span class="line"><span class="comment"># RotateSize = 256</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[HTTP]</span></span><br><span class="line"><span class="comment"># http listening address</span></span><br><span class="line"><span class="attr">Host</span> = <span class="string">&quot;0.0.0.0&quot;</span></span><br><span class="line"><span class="comment"># http listening port</span></span><br><span class="line"><span class="attr">Port</span> = <span class="string">17000</span></span><br><span class="line"><span class="comment"># https cert file path</span></span><br><span class="line"><span class="attr">CertFile</span> = <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="comment"># https key file path</span></span><br><span class="line"><span class="attr">KeyFile</span> = <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="comment"># whether print access log</span></span><br><span class="line"><span class="attr">PrintAccessLog</span> = <span class="string">false</span></span><br><span class="line"><span class="comment"># whether enable pprof</span></span><br><span class="line"><span class="attr">PProf</span> = <span class="string">false</span></span><br><span class="line"><span class="comment"># expose prometheus /metrics?</span></span><br><span class="line"><span class="attr">ExposeMetrics</span> = <span class="string">true</span></span><br><span class="line"><span class="comment"># http graceful shutdown timeout, unit: s</span></span><br><span class="line"><span class="attr">ShutdownTimeout</span> = <span class="string">30</span></span><br><span class="line"><span class="comment"># max content length: 64M</span></span><br><span class="line"><span class="attr">MaxContentLength</span> = <span class="string">67108864</span></span><br><span class="line"><span class="comment"># http server read timeout, unit: s</span></span><br><span class="line"><span class="attr">ReadTimeout</span> = <span class="string">20</span></span><br><span class="line"><span class="comment"># http server write timeout, unit: s</span></span><br><span class="line"><span class="attr">WriteTimeout</span> = <span class="string">40</span></span><br><span class="line"><span class="comment"># http server idle timeout, unit: s</span></span><br><span class="line"><span class="attr">IdleTimeout</span> = <span class="string">120</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[HTTP.ShowCaptcha]</span></span><br><span class="line"><span class="attr">Enable</span> = <span class="string">false</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[HTTP.APIForAgent]</span></span><br><span class="line"><span class="attr">Enable</span> = <span class="string">true</span></span><br><span class="line"><span class="comment"># [HTTP.APIForAgent.BasicAuth]</span></span><br><span class="line"><span class="comment"># user001 = &quot;ccc26da7b9aba533cbb263a36c07dcc5&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[HTTP.APIForService]</span></span><br><span class="line"><span class="attr">Enable</span> = <span class="string">false</span></span><br><span class="line"><span class="attr">[HTTP.APIForService.BasicAuth]</span></span><br><span class="line"><span class="attr">user001</span> = <span class="string">&quot;ccc26da7b9aba533cbb263a36c07dcc5&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[HTTP.JWTAuth]</span></span><br><span class="line"><span class="comment"># unit: min</span></span><br><span class="line"><span class="attr">AccessExpired</span> = <span class="string">1500</span></span><br><span class="line"><span class="comment"># unit: min</span></span><br><span class="line"><span class="attr">RefreshExpired</span> = <span class="string">10080</span></span><br><span class="line"><span class="attr">RedisKeyPrefix</span> = <span class="string">&quot;/jwt/&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[HTTP.ProxyAuth]</span></span><br><span class="line"><span class="comment"># if proxy auth enabled, jwt auth is disabled</span></span><br><span class="line"><span class="attr">Enable</span> = <span class="string">false</span></span><br><span class="line"><span class="comment"># username key in http proxy header</span></span><br><span class="line"><span class="attr">HeaderUserNameKey</span> = <span class="string">&quot;X-User-Name&quot;</span></span><br><span class="line"><span class="attr">DefaultRoles</span> = <span class="string">[&quot;Standard&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[HTTP.RSA]</span></span><br><span class="line"><span class="comment"># open RSA</span></span><br><span class="line"><span class="attr">OpenRSA</span> = <span class="string">false</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[DB]</span></span><br><span class="line"><span class="comment"># postgres: host=%s port=%s user=%s dbname=%s password=%s sslmode=%s</span></span><br><span class="line"><span class="comment"># postgres: DSN=&quot;host=127.0.0.1 port=5432 user=root dbname=n9e_v6 password=1234 sslmode=disable&quot;</span></span><br><span class="line"><span class="attr">DSN</span>=<span class="string">&quot;n9e_v8:7vfwNNFsGPAYcheujZUy@tcp(10.10.4.15:3306)/n9e_v8?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&amp;allowNativePasswords=true&quot;</span></span><br><span class="line"><span class="comment"># enable debug mode or not</span></span><br><span class="line"><span class="attr">Debug</span> = <span class="string">false</span></span><br><span class="line"><span class="comment"># mysql postgres</span></span><br><span class="line"><span class="attr">DBType</span> = <span class="string">&quot;mysql&quot;</span></span><br><span class="line"><span class="comment"># unit: s</span></span><br><span class="line"><span class="attr">MaxLifetime</span> = <span class="string">7200</span></span><br><span class="line"><span class="comment"># max open connections</span></span><br><span class="line"><span class="attr">MaxOpenConns</span> = <span class="string">150</span></span><br><span class="line"><span class="comment"># max idle connections</span></span><br><span class="line"><span class="attr">MaxIdleConns</span> = <span class="string">50</span></span><br><span class="line"><span class="comment"># enable auto migrate or not</span></span><br><span class="line"><span class="comment"># EnableAutoMigrate = false</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[Redis]</span></span><br><span class="line"><span class="comment"># address, ip:port or ip1:port,ip2:port for cluster and sentinel(SentinelAddrs)</span></span><br><span class="line"><span class="attr">Address</span> = <span class="string">&quot;10.10.4.113:6379&quot;</span></span><br><span class="line"><span class="attr">Username</span> = <span class="string">&quot;n9e&quot;</span></span><br><span class="line"><span class="attr">Password</span> = <span class="string">&quot;ReNt9qRtYmYnsgxH94Rr&quot;</span></span><br><span class="line"><span class="attr">DB</span> = <span class="string">8</span></span><br><span class="line"><span class="comment"># UseTLS = false</span></span><br><span class="line"><span class="comment"># TLSMinVersion = &quot;1.2&quot;</span></span><br><span class="line"><span class="comment"># standalone cluster sentinel</span></span><br><span class="line"><span class="attr">RedisType</span> = <span class="string">&quot;standalone&quot;</span></span><br><span class="line"><span class="comment"># Mastername for sentinel type</span></span><br><span class="line"><span class="comment"># MasterName = &quot;mymaster&quot;</span></span><br><span class="line"><span class="comment"># SentinelUsername = &quot;&quot;</span></span><br><span class="line"><span class="comment"># SentinelPassword = &quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[Alert]</span></span><br><span class="line"><span class="attr">[Alert.Heartbeat]</span></span><br><span class="line"><span class="comment"># auto detect if blank</span></span><br><span class="line"><span class="attr">IP</span> = <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="comment"># unit ms</span></span><br><span class="line"><span class="attr">Interval</span> = <span class="string">1000</span></span><br><span class="line"><span class="attr">EngineName</span> = <span class="string">&quot;default&quot;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># [Alert.Alerting]</span></span><br><span class="line"><span class="comment"># NotifyConcurrency = 10</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[Center]</span></span><br><span class="line"><span class="attr">MetricsYamlFile</span> = <span class="string">&quot;./etc/metrics.yaml&quot;</span></span><br><span class="line"><span class="attr">I18NHeaderKey</span> = <span class="string">&quot;X-Language&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[Center.AnonymousAccess]</span></span><br><span class="line"><span class="attr">PromQuerier</span> = <span class="string">true</span></span><br><span class="line"><span class="attr">AlertDetail</span> = <span class="string">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[Pushgw]</span></span><br><span class="line"><span class="comment"># use target labels in database instead of in series</span></span><br><span class="line"><span class="attr">LabelRewrite</span> = <span class="string">true</span></span><br><span class="line"><span class="attr">ForceUseServerTS</span> = <span class="string">true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># [Pushgw.DebugSample]</span></span><br><span class="line"><span class="comment"># ident = &quot;xx&quot;</span></span><br><span class="line"><span class="comment"># __name__ = &quot;xx&quot;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># [Pushgw.WriterOpt]</span></span><br><span class="line"><span class="comment"># QueueMaxSize = 1000000</span></span><br><span class="line"><span class="comment"># QueuePopSize = 1000</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[[Pushgw.Writers]]</span></span><br><span class="line"><span class="comment"># Url = &quot;http://127.0.0.1:8480/insert/0/prometheus/api/v1/write&quot;</span></span><br><span class="line"><span class="attr">Url</span> = <span class="string">&quot;http://127.0.0.1:9090/api/v1/write&quot;</span></span><br><span class="line"><span class="comment"># Basic auth username</span></span><br><span class="line"><span class="attr">BasicAuthUser</span> = <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="comment"># Basic auth password</span></span><br><span class="line"><span class="attr">BasicAuthPass</span> = <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="comment"># timeout settings, unit: ms</span></span><br><span class="line"><span class="attr">Headers</span> = <span class="string">[&quot;X-From&quot;, &quot;n9e&quot;]</span></span><br><span class="line"><span class="attr">Timeout</span> = <span class="string">10000</span></span><br><span class="line"><span class="attr">DialTimeout</span> = <span class="string">3000</span></span><br><span class="line"><span class="attr">TLSHandshakeTimeout</span> = <span class="string">30000</span></span><br><span class="line"><span class="attr">ExpectContinueTimeout</span> = <span class="string">1000</span></span><br><span class="line"><span class="attr">IdleConnTimeout</span> = <span class="string">90000</span></span><br><span class="line"><span class="comment"># time duration, unit: ms</span></span><br><span class="line"><span class="attr">KeepAlive</span> = <span class="string">30000</span></span><br><span class="line"><span class="attr">MaxConnsPerHost</span> = <span class="string">0</span></span><br><span class="line"><span class="attr">MaxIdleConns</span> = <span class="string">100</span></span><br><span class="line"><span class="attr">MaxIdleConnsPerHost</span> = <span class="string">100</span></span><br><span class="line"><span class="comment">## Optional TLS Config</span></span><br><span class="line"><span class="comment"># UseTLS = false</span></span><br><span class="line"><span class="comment"># TLSCA = &quot;/etc/n9e/ca.pem&quot;</span></span><br><span class="line"><span class="comment"># TLSCert = &quot;/etc/n9e/cert.pem&quot;</span></span><br><span class="line"><span class="comment"># TLSKey = &quot;/etc/n9e/key.pem&quot;</span></span><br><span class="line"><span class="comment"># InsecureSkipVerify = false</span></span><br><span class="line"><span class="comment"># [[Writers.WriteRelabels]]</span></span><br><span class="line"><span class="comment"># Action = &quot;replace&quot;</span></span><br><span class="line"><span class="comment"># SourceLabels = [&quot;__address__&quot;]</span></span><br><span class="line"><span class="comment"># Regex = &quot;([^:]+)(?::\\d+)?&quot;</span></span><br><span class="line"><span class="comment"># Replacement = &quot;$1:80&quot;</span></span><br><span class="line"><span class="comment"># TargetLabel = &quot;__address__&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[Ibex]</span></span><br><span class="line"><span class="attr">Enable</span> = <span class="string">true</span></span><br><span class="line"><span class="attr">RPCListen</span> = <span class="string">&quot;0.0.0.0:20090&quot;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">  <span class="section">server</span> &#123;</span><br><span class="line">      <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">      <span class="attribute">listen</span>       <span class="number">443</span> ssl;</span><br><span class="line">      <span class="attribute">server_name</span>  n9e.mudutv.com;</span><br><span class="line">      <span class="attribute">ssl_certificate</span> /etc/nginx/ssl/mudutv.com2024.pem;  <span class="comment">#需要将cert-file-name.pem替换成已上传的证书文件的名称。</span></span><br><span class="line">      <span class="attribute">ssl_certificate_key</span> /etc/nginx/ssl/mudutv.com2024.key; <span class="comment">#需要将cert-file-name.key替换成已上传的证书密钥文件的名称。</span></span><br><span class="line">      <span class="attribute">ssl_session_timeout</span> <span class="number">5m</span>;</span><br><span class="line">      <span class="attribute">ssl_ciphers</span> ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line">      <span class="comment">#表示使用的加密套件的类型。</span></span><br><span class="line">      <span class="attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>; <span class="comment">#表示使用的TLS协议的类型。</span></span><br><span class="line">      <span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">   	 	<span class="comment"># Proxy Grafana Live WebSocket connections.</span></span><br><span class="line">    	<span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Connection <span class="variable">$connection_upgrade</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$http_host</span>;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:17000;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">六一</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2025/09/11/n9e/">http://example.com/2025/09/11/n9e/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://example.com" target="_blank">Hui's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%BF%90%E7%BB%B4/">运维</a></div><div class="post-share"><div class="social-share" data-image="/img/butterfly-icon.png" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/09/11/nginx%20%E5%8A%A8%E9%9D%99%E5%88%86%E7%A6%BB/" title="nginx 动静分离"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">nginx 动静分离</div></div><div class="info-2"><div class="info-item-1">什么是动静分离？动静分离是一种 Web 架构优化技术，其核心思想是将网站的动态内容和静态内容分离开来，由不同的服务器或服务进行处理。  动态内容： 指的是需要服务器端程序（如 PHP, Java, Python, Node.js 等）处理，从数据库中查询数据，经过业务逻辑计算后才能生成的响应。例如：用户登录页面、购物车、文章详情页（需要查询数据库）、API 接口等。这些内容通常会频繁变化，且生成成本较高。 静态内容： 指的是不需要服务器端程序处理，可以直接从文件系统读取并返回给客户端的文件。例如：HTML 页面、CSS 样式表、JavaScript 脚本、图片、字体文件、视频等。这些内容通常不经常变化，且生成成本为零。  为什么要实现动静分离？ 提高系统性能：  专业化处理： Nginx 非常擅长高效地处理静态文件（高性能 Web 服务器）。将静态内容交给 Nginx 直接处理，可以减轻后端应用服务器的压力，让后端服务器专注于处理复杂的动态业务逻辑。 减少资源消耗： 动态请求需要更多 CPU、内存和数据库资源。将这部分请求和静态请求分离，可以避免应用服务器因为处理大量静态请求而资...</div></div></div></a><a class="pagination-related" href="/2025/09/11/new&amp;make/" title="new&amp;make"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">new&make</div></div><div class="info-2"><div class="info-item-1">make 和 new 是 Go 语言中两个非常重要但又容易混淆的内置函数，它们都与内存分配有关。深入理解它们的区别是掌握 Go 内存管理和数据结构使用的关键。 让我们来详细分解它们： 1. new() 函数 用途： new() 函数用于为指定类型分配内存，并返回一个指向该类型零值的指针。 语法： new(Type) Type 是你想要分配内存的类型（例如 int, string, struct, array 等）。   返回值： 返回类型 *Type，即一个指向 Type 类型零值的指针。 分配什么？ new 分配的是内存空间，用于存储该类型的一个实例。 分配的内存会被初始化为该类型的零值： 数值类型 (int, float): 0 布尔类型 (bool): false 字符串类型 (string): &quot;&quot; 指针类型 (*Type): nil 结构体类型 (struct): 其所有成员都会被初始化为各自的零值。 数组类型 (array): 其所有元素都会被初始化为各自的零值。      示例： 123456789101112131415161718192021...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/09/11/websocket/" title="websocket"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-11</div><div class="info-item-2">websocket</div></div><div class="info-2"><div class="info-item-1">什么是 WebSocket？HTTP 协议是无状态的，它是一种请求-响应模型：客户端发出请求，服务器响应，然后连接通常会关闭。这种模式对于静态资源、一次性数据交互非常高效。 然而，对于需要实时、双向通信的场景（如聊天应用、股票行情、在线游戏、协同编辑等），传统的 HTTP 循环请求（轮询、长轮询）效率低下，会导致大量不必要的请求和延迟。 WebSocket 协议正是为了解决这个问题而诞生的。 核心思想： WebSocket 协议提供了一种在单个 TCP 连接上进行全双工（Full-duplex）通信的机制。这意味着客户端和服务器可以在任意时间点互相发送消息，而不需要每次都建立和关闭连接，也不需要客户端不断地发起新的 HTTP 请求。 工作原理：  握手（Handshake）： 客户端首先通过标准的 HTTP 请求发起一个特殊的“握手”过程。这个 HTTP 请求会包含一些特殊的 Header，如 Upgrade: websocket 和 Connection: Upgrade，表示客户端希望将当前的 HTTP 连接升级为 WebSocket 连接。 服务器如果支持 WebSocke...</div></div></div></a><a class="pagination-related" href="/2025/09/11/Linux%20pidstat/" title="Linux pidstat"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-11</div><div class="info-item-2">Linux pidstat</div></div><div class="info-2"><div class="info-item-1">pidstat 是 Linux 下 sysstat 工具集中的一个命令，用来监控指定进程（PID）的各种运行指标，常用于排查性能问题。它比 top 更细粒度，可以按进程或线程输出统计信息。  一、基本语法1pidstat [选项] [时间间隔] [次数]   时间间隔：两次采样之间的秒数 次数：采样的次数 如果不加时间间隔和次数，只输出一次快照   二、常用选项 **-u**：显示 CPU 使用情况（默认） **-r**：显示内存使用情况（RSS、VSZ、内存比例等） **-d**：显示 I&#x2F;O 使用情况（读写速率） **-w**：显示上下文切换情况（自愿&#x2F;非自愿） **-t**：显示线程级别统计（默认是进程级别） **-p &lt;pid&gt;**：指定进程 PID（否则显示所有进程） **-h**：以更易读的方式显示时间（hh:mm:ss 格式）   三、示例 监控所有进程的 CPU 使用情况，每隔 2 秒，采集 5 次  1pidstat -u 2 5   监控某个进程（PID&#x3D;1234）的 CPU 和内存情况  1pidstat -u -r...</div></div></div></a><a class="pagination-related" href="/2025/09/11/%E5%9C%A8%20Kubernetes%20%E4%B8%8A%E9%83%A8%E7%BD%B2%20LLM%20%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/" title="在 Kubernetes 上部署 LLM 大语言模型"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-11</div><div class="info-item-2">在 Kubernetes 上部署 LLM 大语言模型</div></div><div class="info-2"><div class="info-item-1">在 Kubernetes 上部署 LLM 大语言模型从今年开始，人们对大型语言模型 (LLM) 及其在 GPU 基础设施上的部署的兴趣显着增加。这种不断增长的热情是由人工智能和机器学习的进步推动的，这需要 GPU 能够有效提供大量的计算能力。GPU 领先制造商 Nvidia 的股价也因这一趋势而飙升。同样诞生了大量的大模型，对于这些模型的部署和管理也变得越来越重要，在这方面 Ollama 和 OpenUI 是一个不错的选择。 Ollama 是一个开源的机器学习模型部署工具，它可以帮助您将模型部署到生产环境中，简化大型语言模型 (LLM) 的管理和交互。Ollama 拥有各种一流的开源模型，例如 Llama 3、Phi 3、Mistral 等等，我们可以将 Ollama 看成是 Docker，但是专注于机器学习模型。  使用 Ollama 部署模型非常简单，就类似于使用 Docker 部署应用程序一样。但是，如果你对 CLI 不熟悉，那么使用 Ollama 会有点痛苦。为了解决这个问题，我们可以使用一个 open-webui 的项目，它提供了一个漂亮的界面，可以让您更轻松地部署模型...</div></div></div></a><a class="pagination-related" href="/2025/09/11/Kafka%20%E4%B8%AD%E5%85%B3%E4%BA%8E%E4%BA%8B%E5%8A%A1%E6%B6%88%E6%81%AF%E7%9A%84%E5%AE%9E%E7%8E%B0/" title="Kafka 中关于事务消息的实现"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-11</div><div class="info-item-2">Kafka 中关于事务消息的实现</div></div><div class="info-2"><div class="info-item-1">Kafka 自 0.11.0 版本引入了事务（Transactions）功能，旨在提供端到端（End-to-End）的“精确一次（Exactly-Once）”语义。这与 RocketMQ 的事务消息（主要解决本地事务与消息发送的原子性）在设计目标和实现机制上有所不同。 Kafka 的事务功能主要解决以下两个问题：  原子写入： 保证生产者（Producer）向多个 Topic 的多个分区写入的一组消息是原子性的，要么全部写入成功并对消费者可见，要么全部失败并不可见。 原子读写： 结合消费者（Consumer）的偏移量提交，可以在一个事务中原子地处理“消费消息 -&gt; 处理逻辑 -&gt; 生产新消息 -&gt; 提交消费偏移量”这整个流程，从而实现“读取-处理-写入”的精确一次语义。   Kafka 事务消息的实现核心Kafka 的事务机制基于 两阶段提交（Two-Phase Commit, 2PC）的变种，但它是针对 Kafka 内部消息处理的 2PC，不直接涵盖外部数据库事务。 1. 前提：幂等生产者（Idempotent Producer）这是实现事务的基础。在 Kaf...</div></div></div></a><a class="pagination-related" href="/2025/09/11/%E6%A3%80%E6%B5%8B/" title="检测"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-11</div><div class="info-item-2">检测</div></div><div class="info-2"><div class="info-item-1">检测本节我们将学习如何来检查我们的实例数据抓取健康状况。 检查抓取实例每当 Prometheus 抓取一个目标时，它都会存储一个合成的样本，其中包含指标名称 up 和被抓取实例的 job 和 instance 标签，如果抓取成功，则样本的值被设置为 1，如果抓取失败，则设置为 0，所以我们可以通过如下所示的查询来获取当前哪些实例处于正常或挂掉的状态： 1up&#123;job=&quot;demo&quot;&#125;  正常三个演示服务实例都处于正常状态，所以应该都为1。如果我们将第一个实例停掉，重新查询则第一个实例结果为0：  如果只希望显示 down 掉的实例，可以通过过滤0值来获取： 1up&#123;job=&quot;demo&quot;&#125; == 0   或者获取挂掉实例的总数： 1count by(job) (up&#123;job=&quot;demo&quot;&#125; == 0)   一般情况下这种类型的查询会用于指标抓取健康状态报警。  注意：因为 count() 是一个聚合运算符，它期望有一组维度的时间序列作为其输入，并且可以根据 by 或...</div></div></div></a><a class="pagination-related" href="/2025/09/11/Thanos%20Store/" title="Thanos Store"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-11</div><div class="info-item-2">Thanos Store</div></div><div class="info-2"><div class="info-item-1">Store 组件上面我们安装了 Thanos 的 Sidecar 和 Querier 组件，已经可以做到 Prometheus 的高可用，通过 Querier 提供一个统一的入口来查询监控数据，而且还可以对监控数据自动去重，但是还有一个非常重要的地方是还没有配置对象存储，如果想要查看历史监控数据就不行了，这个时候我们就需要去配置 Thanos Store 组件，将历史监控指标存储在对象存储中去。 目前 Thanos 支持的对象存储有：  要在生产环境使用最好使用 Stable 状态的，比如 S3 或者兼容 S3 的服务，比如 Ceph、Minio 等等。 对于国内用户当然最方便的还是直接使用阿里云 OSS 或者腾讯云 COS 这样的服务，但是很多时候可能我们的服务并不是跑在公有云上面的，所以这里我们用 Minio 来部署一个兼容 S3 协议的对象存储服务。 安装 MinioMinIO 是一个基于 Apache License v2.0 开源协议的高性能分布式对象存储服务，为大规模私有云基础设施而设计。它兼容亚马逊 S3 云存储服务接口，非常适合于存储大容量非结构化的数据，例如图片...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">六一</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">274</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">22</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">45</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/27/hexo-beautify/" title="Hexo 博客美化笔记：从零搭建高颜值技术博客">Hexo 博客美化笔记：从零搭建高颜值技术博客</a><time datetime="2026-02-27T04:00:00.000Z" title="发表于 2026-02-27 12:00:00">2026-02-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/11/Jenkens-Blue%20Ocean%20%E6%8F%92%E4%BB%B6/" title="Jenkins Blue Ocean">Jenkins Blue Ocean</a><time datetime="2025-09-11T12:42:57.000Z" title="发表于 2025-09-11 20:42:57">2025-09-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/11/jenkins-jenkinsfile/" title="Jenkins Jenkinsfile">Jenkins Jenkinsfile</a><time datetime="2025-09-11T12:40:44.000Z" title="发表于 2025-09-11 20:40:44">2025-09-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/11/shell-trap/" title="Linux-trap">Linux-trap</a><time datetime="2025-09-11T12:40:44.000Z" title="发表于 2025-09-11 20:40:44">2025-09-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/11/shell-%E6%95%B0%E7%BB%84/" title="Shell-数组">Shell-数组</a><time datetime="2025-09-11T12:40:44.000Z" title="发表于 2025-09-11 20:40:44">2025-09-11</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 - 2026 By 六一</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.4</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.4"></script><script src="/js/main.js?v=5.5.4"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true}});</script></body></html>