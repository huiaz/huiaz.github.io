<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Linux 网络接口 | Hui's Blog</title><meta name="author" content="六一"><meta name="copyright" content="六一"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Linux 系统中的网络接 一、Linux 网络接口配置概述在 Linux 中，网络接口的配置主要涉及到以下几个方面：  接口命名： 识别网络设备的名称（例如 eth0, enp0s3, ens33 等）。 IP 地址配置： 设置静态或动态（DHCP）IP 地址、子网掩码、广播地址。 网关配置： 设置默认路由，使系统能够访问外部网络。 DNS 配置： 设置域名解析服务器。 开&#x2F;关接口：">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux 网络接口">
<meta property="og:url" content="https://huiaz.github.io/2025/09/11/Linux%20%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3/index.html">
<meta property="og:site_name" content="Hui&#39;s Blog">
<meta property="og:description" content="Linux 系统中的网络接 一、Linux 网络接口配置概述在 Linux 中，网络接口的配置主要涉及到以下几个方面：  接口命名： 识别网络设备的名称（例如 eth0, enp0s3, ens33 等）。 IP 地址配置： 设置静态或动态（DHCP）IP 地址、子网掩码、广播地址。 网关配置： 设置默认路由，使系统能够访问外部网络。 DNS 配置： 设置域名解析服务器。 开&#x2F;关接口：">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://huiaz.github.io/img/butterfly-icon.png">
<meta property="article:published_time" content="2025-09-11T12:32:34.000Z">
<meta property="article:modified_time" content="2025-09-11T13:47:05.663Z">
<meta property="article:author" content="六一">
<meta property="article:tag" content="运维">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://huiaz.github.io/img/butterfly-icon.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Linux 网络接口",
  "url": "https://huiaz.github.io/2025/09/11/Linux%20%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3/",
  "image": "https://huiaz.github.io/img/butterfly-icon.png",
  "datePublished": "2025-09-11T12:32:34.000Z",
  "dateModified": "2025-09-11T13:47:05.663Z",
  "author": [
    {
      "@type": "Person",
      "name": "六一",
      "url": "https://huiaz.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://huiaz.github.io/2025/09/11/Linux%20%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.4"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.13.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux 网络接口',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">274</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">22</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">45</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Hui's Blog</span></a><a class="nav-page-title" href="/"><span class="site-name">Linux 网络接口</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> About</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Linux 网络接口</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-09-11T12:32:34.000Z" title="发表于 2025-09-11 20:32:34">2025-09-11</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-09-11T13:47:05.663Z" title="更新于 2025-09-11 21:47:05">2025-09-11</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/">Linux</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/Manage/">Manage</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h3 id="Linux-系统中的网络接"><a href="#Linux-系统中的网络接" class="headerlink" title="Linux 系统中的网络接"></a>Linux 系统中的网络接</h3><hr>
<h3 id="一、Linux-网络接口配置概述"><a href="#一、Linux-网络接口配置概述" class="headerlink" title="一、Linux 网络接口配置概述"></a>一、Linux 网络接口配置概述</h3><p>在 Linux 中，网络接口的配置主要涉及到以下几个方面：</p>
<ol>
<li><strong>接口命名：</strong> 识别网络设备的名称（例如 <code>eth0</code>, <code>enp0s3</code>, <code>ens33</code> 等）。</li>
<li><strong>IP 地址配置：</strong> 设置静态或动态（DHCP）IP 地址、子网掩码、广播地址。</li>
<li><strong>网关配置：</strong> 设置默认路由，使系统能够访问外部网络。</li>
<li><strong>DNS 配置：</strong> 设置域名解析服务器。</li>
<li><strong>开&#x2F;关接口：</strong> 启用或禁用网络接口。</li>
<li><strong>持久化配置：</strong> 使网络配置在系统重启后依然有效。</li>
</ol>
<p>历史上，Linux 有几种不同的网络配置工具和方法，但目前主流的发行版倾向于使用 <code>ip</code> 命令和系统网络管理工具（如 <code>netplan</code>, <code>NetworkManager</code> 等）。</p>
<hr>
<h3 id="二、查看网络接口信息"><a href="#二、查看网络接口信息" class="headerlink" title="二、查看网络接口信息"></a>二、查看网络接口信息</h3><p>在配置之前，首先要了解当前网络接口的状态。</p>
<h4 id="1-ip-addr-show-或-ip-a：查看网络接口的-IP-地址和状态"><a href="#1-ip-addr-show-或-ip-a：查看网络接口的-IP-地址和状态" class="headerlink" title="1. ip addr show 或 ip a：查看网络接口的 IP 地址和状态"></a>1. <code>ip addr show</code> 或 <code>ip a</code>：查看网络接口的 IP 地址和状态</h4><p>这是现代 Linux 系统中查看网络接口信息的首选命令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ip addr show</span><br><span class="line"><span class="comment"># 或者简写</span></span><br><span class="line">ip a</span><br></pre></td></tr></table></figure>

<p><strong>示例输出：</strong></p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">1</span>: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span class="number">65536</span> qdisc noqueue state UNKNOWN group default qlen <span class="number">1000</span></span><br><span class="line">    <span class="attribute">link</span>/loopback <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> brd <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span></span><br><span class="line">    <span class="attribute">inet</span> <span class="number">127.0.0.1</span>/<span class="number">8</span> scope host lo</span><br><span class="line">       <span class="attribute">valid_lft</span> forever preferred_lft forever</span><br><span class="line">    <span class="attribute">inet6</span> ::<span class="number">1</span>/<span class="number">128</span> scope host</span><br><span class="line">       <span class="attribute">valid_lft</span> forever preferred_lft forever</span><br><span class="line"><span class="attribute">2</span>: enp0s3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="number">1500</span> qdisc fq_codel state UP group default qlen <span class="number">1000</span></span><br><span class="line">    <span class="attribute">link</span>/ether <span class="number">08</span>:<span class="number">00</span>:<span class="number">27</span>:<span class="number">1</span>c:e1:<span class="number">98</span> brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    <span class="attribute">inet</span> <span class="number">192.168.1.100</span>/<span class="number">24</span> brd <span class="number">192.168.1.255</span> scope global dynamic enp0s3</span><br><span class="line">       <span class="attribute">valid_lft</span> <span class="number">86256</span>sec preferred_lft <span class="number">86256</span>sec</span><br><span class="line">    <span class="attribute">inet6</span> fe80::a00:<span class="number">27</span>ff:fe1c:e198/<span class="number">64</span> scope link</span><br><span class="line">       <span class="attribute">valid_lft</span> forever preferred_lft forever</span><br></pre></td></tr></table></figure>

<ul>
<li><strong><code>lo</code></strong>: 回环接口，用于本机通信。</li>
<li><strong><code>enp0s3</code></strong>: 物理网卡接口（名称可能因为内核规则 <code>udev</code> 而不同，例如 <code>eth0</code>, <code>ens33</code> 等）。</li>
<li><strong><code>&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;</code></strong>: 接口状态，<code>UP</code> 表示接口已启用。</li>
<li><strong><code>mtu</code></strong>: 最大传输单元。</li>
<li><strong><code>link/ether</code></strong>: 网卡的 MAC 地址。</li>
<li><strong><code>inet</code></strong>: IPv4 地址信息。<code>192.168.1.100/24</code> 表示 IP 地址和 CIDR 格式的子网掩码（&#x2F;24 等同于 255.255.255.0）。<code>dynamic</code> 表示 IP 是通过 DHCP 获取的。</li>
<li><strong><code>inet6</code></strong>: IPv6 地址信息。</li>
</ul>
<h4 id="2-ip-route-show-或-ip-r：查看路由表"><a href="#2-ip-route-show-或-ip-r：查看路由表" class="headerlink" title="2. ip route show 或 ip r：查看路由表"></a>2. <code>ip route show</code> 或 <code>ip r</code>：查看路由表</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ip route show</span><br><span class="line"><span class="comment"># 或者简写</span></span><br><span class="line">ip r</span><br></pre></td></tr></table></figure>

<p><strong>示例输出：</strong></p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">default</span> via <span class="number">192.168.1.1</span> dev enp0s3 proto dhcp metric <span class="number">100</span></span><br><span class="line"><span class="attribute">192</span>.<span class="number">168</span>.<span class="number">1</span>.<span class="number">0</span>/<span class="number">24</span> dev enp0s3 proto kernel scope link src <span class="number">192.168.1.100</span> metric <span class="number">100</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong><code>default via 192.168.1.1 dev enp0s3</code></strong>: 默认网关是 <code>192.168.1.1</code>，通过 <code>enp0s3</code> 接口。</li>
</ul>
<h4 id="3-cat-etc-resolv-conf：查看-DNS-服务器配置"><a href="#3-cat-etc-resolv-conf：查看-DNS-服务器配置" class="headerlink" title="3. cat /etc/resolv.conf：查看 DNS 服务器配置"></a>3. <code>cat /etc/resolv.conf</code>：查看 DNS 服务器配置</h4><p>该文件记录了系统用于域名解析的 DNS 服务器地址。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/resolv.conf</span><br></pre></td></tr></table></figure>

<p><strong>示例输出：</strong></p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Generated by NetworkManager</span></span><br><span class="line"><span class="attribute">search</span> localdomain</span><br><span class="line">nameserver <span class="number">192.168.1.1</span></span><br><span class="line">nameserver <span class="number">8.8.8.8</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="三、临时配置网络接口-使用-ip-命令"><a href="#三、临时配置网络接口-使用-ip-命令" class="headerlink" title="三、临时配置网络接口 (使用 ip 命令)"></a>三、临时配置网络接口 (使用 <code>ip</code> 命令)</h3><p>这些配置在系统重启后会失效，主要用于测试或临时修改。需要 <code>sudo</code> 权限。</p>
<h4 id="1-启用-禁用网络接口"><a href="#1-启用-禁用网络接口" class="headerlink" title="1. 启用&#x2F;禁用网络接口"></a>1. 启用&#x2F;禁用网络接口</h4><ul>
<li><strong>启用接口：</strong><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> ip <span class="built_in">link</span> <span class="built_in">set</span> dev enp0s3 up</span><br></pre></td></tr></table></figure></li>
<li><strong>禁用接口：</strong><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> ip <span class="built_in">link</span> <span class="built_in">set</span> dev enp0s3 down</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="2-配置静态-IP-地址"><a href="#2-配置静态-IP-地址" class="headerlink" title="2. 配置静态 IP 地址"></a>2. 配置静态 IP 地址</h4><p>假设接口名为 <code>enp0s3</code>，IP 地址为 <code>192.168.1.100</code>，子网掩码为 <code>255.255.255.0</code> (即 <code>/24</code>)。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> ip addr add 192.168.1.100/24 dev enp0s3</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line"><span class="built_in">sudo</span> ip addr add 192.168.1.100/255.255.255.0 dev enp0s3</span><br></pre></td></tr></table></figure>

<h4 id="3-删除-IP-地址"><a href="#3-删除-IP-地址" class="headerlink" title="3. 删除 IP 地址"></a>3. 删除 IP 地址</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> ip addr del 192.168.1.100/24 dev enp0s3</span><br></pre></td></tr></table></figure>

<h4 id="4-配置默认网关"><a href="#4-配置默认网关" class="headerlink" title="4. 配置默认网关"></a>4. 配置默认网关</h4><p>假设网关 IP 为 <code>192.168.1.1</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> ip route add default via 192.168.1.1 dev enp0s3</span><br></pre></td></tr></table></figure>

<h4 id="5-删除默认网关"><a href="#5-删除默认网关" class="headerlink" title="5. 删除默认网关"></a>5. 删除默认网关</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> ip route del default via 192.168.1.1</span><br></pre></td></tr></table></figure>

<h4 id="6-配置-DNS-服务器"><a href="#6-配置-DNS-服务器" class="headerlink" title="6. 配置 DNS 服务器"></a>6. 配置 DNS 服务器</h4><p>DNS 服务器配置通常通过修改 <code>/etc/resolv.conf</code> 文件实现。但<strong>不建议直接手动编辑此文件</strong>，因为它可能被 <code>NetworkManager</code> 或 <code>systemd-resolved</code> 等服务覆盖。临时修改时可以：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;nameserver 8.8.8.8&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> /etc/resolv.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;nameserver 8.8.4.4&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> -a /etc/resolv.conf <span class="comment"># -a 追加</span></span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong> 如果系统使用了 <code>NetworkManager</code> 或 <code>systemd-resolved</code>，直接修改 <code>/etc/resolv.conf</code> 可能会在重启后或网络服务重启后失效。推荐通过这些服务的配置接口进行 DNS 配置以实现持久化。</p>
<hr>
<h3 id="四、持久化配置网络接口"><a href="#四、持久化配置网络接口" class="headerlink" title="四、持久化配置网络接口"></a>四、持久化配置网络接口</h3><p>持久化配置是生产环境中的标准做法，确保系统重启后网络设置依然有效。不同的 Linux 发行版有不同的网络管理工具。</p>
<h4 id="1-Debian-Ubuntu-系列-etc-network-interfaces"><a href="#1-Debian-Ubuntu-系列-etc-network-interfaces" class="headerlink" title="1. Debian&#x2F;Ubuntu 系列 (/etc/network/interfaces)"></a>1. Debian&#x2F;Ubuntu 系列 (<code>/etc/network/interfaces</code>)</h4><p>这是传统的 Debian&#x2F;Ubuntu 网络配置方式，适用于没有 <code>NetworkManager</code> 的服务器环境。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> vim /etc/network/interfaces</span><br></pre></td></tr></table></figure>

<p><strong>示例（静态 IP 配置）：</strong></p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This file describes the network interfaces available on your system</span></span><br><span class="line"><span class="comment"># and how to activate them. For more information, see interfaces(5).</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">source</span> /etc/network/interfaces.d/*</span><br><span class="line"></span><br><span class="line"><span class="comment"># The loopback network interface</span></span><br><span class="line">auto lo</span><br><span class="line">iface lo inet loopback</span><br><span class="line"></span><br><span class="line"><span class="comment"># The primary network interface (enp0s3)</span></span><br><span class="line">auto enp0s3             <span class="comment"># 系统启动时自动激活接口</span></span><br><span class="line">iface enp0s3 inet static <span class="comment"># 接口配置为静态IP</span></span><br><span class="line"></span><br><span class="line">    address <span class="number">192.168.1.100</span>   <span class="comment"># IP地址</span></span><br><span class="line">    netmask <span class="number">255.255.255.0</span>   <span class="comment"># 子网掩码</span></span><br><span class="line">    gateway <span class="number">192.168.1.1</span>     <span class="comment"># 默认网关</span></span><br><span class="line">    dns-nameservers <span class="number">8.8.8.8</span> <span class="number">8.8.4.4</span> <span class="comment"># DNS服务器</span></span><br></pre></td></tr></table></figure>

<p><strong>示例（DHCP 配置）：</strong></p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># The primary network <span class="keyword">interface</span> (<span class="symbol">enp0s3</span>)</span><br><span class="line"><span class="symbol">auto</span> <span class="symbol">enp0s3</span></span><br><span class="line"><span class="symbol">iface</span> <span class="symbol">enp0s3</span> <span class="symbol">inet</span> <span class="symbol">dhcp</span></span><br></pre></td></tr></table></figure>

<p><strong>应用配置：</strong></p>
<ul>
<li>重启网络服务（推荐，但可能导致短暂断网）：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl restart networking</span><br></pre></td></tr></table></figure></li>
<li>或者重启整个系统。</li>
<li>或使用 <code>ifdown</code> &#x2F; <code>ifup</code> 命令禁用&#x2F;启用接口：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> ifdown enp0s3</span><br><span class="line"><span class="built_in">sudo</span> ifup enp0s3</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="2-CentOS-RHEL-Fedora-系列-etc-sysconfig-network-scripts-ifcfg"><a href="#2-CentOS-RHEL-Fedora-系列-etc-sysconfig-network-scripts-ifcfg" class="headerlink" title="2. CentOS&#x2F;RHEL&#x2F;Fedora 系列 (/etc/sysconfig/network-scripts/ifcfg-&lt;interface&gt;)"></a>2. CentOS&#x2F;RHEL&#x2F;Fedora 系列 (<code>/etc/sysconfig/network-scripts/ifcfg-&lt;interface&gt;</code>)</h4><p>这是 Red Hat 系列发行版常用的配置方式。每个接口对应一个 <code>ifcfg-</code> 文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> vim /etc/sysconfig/network-scripts/ifcfg-enp0s3</span><br></pre></td></tr></table></figure>

<p><strong>示例（静态 IP 配置）：</strong></p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">TYPE</span>=<span class="string">&quot;Ethernet&quot;</span></span><br><span class="line"><span class="attr">PROXY_METHOD</span>=<span class="string">&quot;none&quot;</span></span><br><span class="line"><span class="attr">BROWSER_ONLY</span>=<span class="string">&quot;no&quot;</span></span><br><span class="line"><span class="attr">BOOTPROTO</span>=<span class="string">&quot;static&quot;</span>          <span class="comment"># 启动协议：none/static (静态), dhcp (动态)</span></span><br><span class="line"><span class="attr">DEFROUTE</span>=<span class="string">&quot;yes&quot;</span></span><br><span class="line"><span class="attr">IPV4_FAILURE_FATAL</span>=<span class="string">&quot;no&quot;</span></span><br><span class="line"><span class="attr">IPV6INIT</span>=<span class="string">&quot;yes&quot;</span></span><br><span class="line"><span class="attr">IPV6_AUTOCONF</span>=<span class="string">&quot;yes&quot;</span></span><br><span class="line"><span class="attr">IPV6_DEFROUTE</span>=<span class="string">&quot;yes&quot;</span></span><br><span class="line"><span class="attr">IPV6_FAILURE_FATAL</span>=<span class="string">&quot;no&quot;</span></span><br><span class="line"><span class="attr">IPV6_ADDR_GEN_MODE</span>=<span class="string">&quot;stable-privacy&quot;</span></span><br><span class="line"><span class="attr">NAME</span>=<span class="string">&quot;enp0s3&quot;</span></span><br><span class="line"><span class="attr">UUID</span>=<span class="string">&quot;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&quot;</span> <span class="comment"># 每个接口的唯一标识符</span></span><br><span class="line"><span class="attr">DEVICE</span>=<span class="string">&quot;enp0s3&quot;</span>             <span class="comment"># 设备名称</span></span><br><span class="line"><span class="attr">ONBOOT</span>=<span class="string">&quot;yes&quot;</span>                <span class="comment"># 系统启动时是否激活接口</span></span><br><span class="line"><span class="attr">IPADDR</span>=<span class="string">&quot;192.168.1.100&quot;</span>      <span class="comment"># IP 地址</span></span><br><span class="line"><span class="attr">PREFIX</span>=<span class="string">&quot;24&quot;</span>                 <span class="comment"># CIDR 格式的子网掩码</span></span><br><span class="line"><span class="attr">GATEWAY</span>=<span class="string">&quot;192.168.1.1&quot;</span>       <span class="comment"># 默认网关</span></span><br><span class="line"><span class="attr">DNS1</span>=<span class="string">&quot;8.8.8.8&quot;</span>              <span class="comment"># DNS 服务器1</span></span><br><span class="line"><span class="attr">DNS2</span>=<span class="string">&quot;8.8.4.4&quot;</span>              <span class="comment"># DNS 服务器2</span></span><br></pre></td></tr></table></figure>

<p><strong>示例（DHCP 配置）：</strong></p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">TYPE</span><span class="operator">=</span><span class="string">&quot;Ethernet&quot;</span></span><br><span class="line"><span class="attribute">BOOTPROTO</span><span class="operator">=</span><span class="string">&quot;dhcp&quot;</span></span><br><span class="line"><span class="attribute">NAME</span><span class="operator">=</span><span class="string">&quot;enp0s3&quot;</span></span><br><span class="line"><span class="attribute">DEVICE</span><span class="operator">=</span><span class="string">&quot;enp0s3&quot;</span></span><br><span class="line"><span class="attribute">ONBOOT</span><span class="operator">=</span><span class="string">&quot;yes&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>应用配置：</strong></p>
<ul>
<li>重启网络服务：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl restart network</span><br></pre></td></tr></table></figure></li>
<li>或者重启整个系统。</li>
<li>或使用 <code>ifdown</code> &#x2F; <code>ifup</code>：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> ifdown enp0s3</span><br><span class="line"><span class="built_in">sudo</span> ifup enp0s3</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="3-Ubuntu-Server-18-04-Netplan-etc-netplan-yaml"><a href="#3-Ubuntu-Server-18-04-Netplan-etc-netplan-yaml" class="headerlink" title="3. Ubuntu Server 18.04+ &#x2F; Netplan (/etc/netplan/*.yaml)"></a>3. Ubuntu Server 18.04+ &#x2F; Netplan (<code>/etc/netplan/*.yaml</code>)</h4><p>Netplan 是 Ubuntu Server 18.04 及更高版本默认的网络配置抽象层，使用 YAML 格式配置文件，后台可以是 <code>networkd</code> 或 <code>NetworkManager</code>。它旨在简化复杂的网络配置。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> vim /etc/netplan/01-netcfg.yaml <span class="comment"># 文件名可能不同</span></span><br></pre></td></tr></table></figure>

<p><strong>示例（静态 IP 配置）：</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">network:</span></span><br><span class="line">  <span class="attr">version:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">renderer:</span> <span class="string">networkd</span> <span class="comment"># 或 NetworkManager，取决于你的需求和桌面环境</span></span><br><span class="line">  <span class="attr">ethernets:</span></span><br><span class="line">    <span class="attr">enp0s3:</span>          <span class="comment"># 接口名称</span></span><br><span class="line">      <span class="attr">dhcp4:</span> <span class="literal">no</span>      <span class="comment"># 禁用IPv4 DHCP</span></span><br><span class="line">      <span class="attr">addresses:</span> [<span class="number">192.168</span><span class="number">.1</span><span class="number">.100</span><span class="string">/24</span>] <span class="comment"># IP地址和子网掩码</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">to:</span> <span class="string">default</span></span><br><span class="line">          <span class="attr">via:</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.1</span> <span class="comment"># 默认网关</span></span><br><span class="line">      <span class="attr">nameservers:</span></span><br><span class="line">        <span class="attr">addresses:</span> [<span class="number">8.8</span><span class="number">.8</span><span class="number">.8</span>, <span class="number">8.8</span><span class="number">.4</span><span class="number">.4</span>] <span class="comment"># DNS服务器</span></span><br></pre></td></tr></table></figure>

<p><strong>示例（DHCP 配置）：</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">network:</span></span><br><span class="line">  <span class="attr">version:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">renderer:</span> <span class="string">networkd</span></span><br><span class="line">  <span class="attr">ethernets:</span></span><br><span class="line">    <span class="attr">enp0s3:</span></span><br><span class="line">      <span class="attr">dhcp4:</span> <span class="literal">yes</span> <span class="comment"># 启用IPv4 DHCP</span></span><br></pre></td></tr></table></figure>

<p><strong>应用配置：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> netplan try <span class="comment"># 尝试应用配置，提供回滚机制</span></span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line"><span class="built_in">sudo</span> netplan apply <span class="comment"># 立即应用配置</span></span><br></pre></td></tr></table></figure>

<h4 id="4-NetworkManager-桌面环境和一些服务器"><a href="#4-NetworkManager-桌面环境和一些服务器" class="headerlink" title="4. NetworkManager (桌面环境和一些服务器)"></a>4. NetworkManager (桌面环境和一些服务器)</h4><p><code>NetworkManager</code> 是一个动态的网络管理服务，特别适用于桌面环境和笔记本电脑，它提供了图形界面和命令行工具 <code>nmcli</code> 来管理网络连接。</p>
<ul>
<li><strong>查看连接：</strong><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection show</span><br></pre></td></tr></table></figure></li>
<li><strong>创建新的静态连接：</strong><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nmcli connection add <span class="built_in">type</span> ethernet con-name my-static-conn ifname enp0s3 ip4 192.168.1.100/24 gw4 192.168.1.1</span><br><span class="line"><span class="built_in">sudo</span> nmcli connection modify my-static-conn ipv4.dns <span class="string">&quot;8.8.8.8 8.8.4.4&quot;</span></span><br><span class="line"><span class="built_in">sudo</span> nmcli connection up my-static-conn</span><br></pre></td></tr></table></figure></li>
<li><strong>创建新的 DHCP 连接：</strong><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nmcli connection add <span class="built_in">type</span> ethernet con-name my-dhcp-conn ifname enp0s3 autoconnect <span class="built_in">yes</span></span><br><span class="line"><span class="built_in">sudo</span> nmcli connection up my-dhcp-conn</span><br></pre></td></tr></table></figure></li>
<li><strong>启用&#x2F;禁用连接：</strong><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nmcli connection up my-connection</span><br><span class="line"><span class="built_in">sudo</span> nmcli connection down my-connection</span><br></pre></td></tr></table></figure></li>
<li><strong>删除连接：</strong><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nmcli connection delete my-connection</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="五、配置最佳实践"><a href="#五、配置最佳实践" class="headerlink" title="五、配置最佳实践"></a>五、配置最佳实践</h3><ol>
<li><strong>确定接口名：</strong> 使用 <code>ip a</code> 或 <code>lsblk -f</code> 确定物理网卡的接口名。注意，传统的 <code>eth0, eth1</code> 命名现在可能被 <code>enpYsX</code> 或 <code>ensX</code> 等预测式网络接口名称取代。</li>
<li><strong>备份配置文件：</strong> 在修改任何网络配置文件之前，务必备份原文件。<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> /etc/network/interfaces /etc/network/interfaces.bak</span><br></pre></td></tr></table></figure></li>
<li><strong>避免同时使用多个网络管理工具：</strong> 例如，不要同时配置 <code>/etc/network/interfaces</code> 和 <code>Netplan</code>，或者 <code>NetworkManager</code> 和传统配置文件，这会导致冲突和不可预测的行为。</li>
<li><strong>远程操作：</strong> 通过 SSH 远程配置网络时，务必小心。建议在一个单独的会话中保留一个活动连接，或者使用 <code>screen</code>&#x2F;<code>tmux</code>，并确保你有一个恢复计划（例如，物理访问或带外管理）。<code>netplan try</code> 命令提供了一个回滚机制，在远程配置时非常有用。</li>
<li><strong>DNS 配置：</strong> 对于静态 IP，务必配置正确的 DNS 服务器，否则无法解析域名。</li>
<li><strong>防火墙：</strong> 配置网络接口后，别忘了配置防火墙（如 <code>ufw</code>, <code>firewalld</code>, <code>iptables</code>）以确保系统安全。</li>
</ol>
<p>通过掌握上述命令和配置方法，您可以有效地管理 Linux 服务器的网络接口。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://huiaz.github.io">六一</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://huiaz.github.io/2025/09/11/Linux%20%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3/">https://huiaz.github.io/2025/09/11/Linux%20%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://huiaz.github.io" target="_blank">Hui's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%BF%90%E7%BB%B4/">运维</a><a class="post-meta__tags" href="/tags/Linux/">Linux</a></div><div class="post-share"><div class="social-share" data-image="/img/butterfly-icon.png" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/09/11/Linux%20%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4%E6%80%9D%E8%B7%AF/" title="Linux 网络故障排除思路"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Linux 网络故障排除思路</div></div><div class="info-2"><div class="info-item-1">好的，作为一名资深运维工程师，当面对“服务无法访问，但服务器可以 Ping 通，且本地服务似乎运行正常”这类棘手的网络故障时，仅仅依赖 netstat 和简单的防火墙检查是不够的。我们需要更深入、更精细的工具来逐层剥离复杂性，找出问题的根源。这里我将扩展之前的故障排查，整合更多强大的工具，形成一个更全面的排除流程。  故障场景回顾与排查目标 现象： Web 服务（如 Nginx 监听 80 端口）从外部无法访问，但服务器能 Ping 通，服务进程显示运行正常，且本地 curl http://localhost:80 正常。 排查目标： 找出流量在哪里被阻挡了。是从客户端发出去就错了？还是在网络传输中丢失？还是在服务器端被防火墙拦截？或者服务进程本身的问题？   全面的多工具排查步骤阶段 1: 客户端测试与初步确认 ping &lt;server_ip&gt;  目的： 确认基本的网络连通性（二层&#x2F;三层）。 结果： 确认服务器可达。 备注： 如果 Ping 不通，问题可能在更底层：客户端网络配置、服务器网卡问题、路由器故障、防火墙完全禁用 ICMP 等。此时需要从网络拓扑...</div></div></div></a><a class="pagination-related" href="/2025/09/11/Linux%20%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6%E9%94%99%E8%AF%AF%E4%BF%AE%E6%8A%A4/" title="Linux 系统文件错误修护"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Linux 系统文件错误修护</div></div><div class="info-2"><div class="info-item-1">修复 Linux 文件系统错误 一、文件系统错误的危害文件系统错误可能导致以下问题：  数据丢失或损坏： 文件内容错乱，甚至文件消失。 系统无法启动： 根文件系统损坏可能导致系统无法挂载核心目录。 应用程序崩溃： 读取到损坏文件或元数据引发应用程序错误。 性能下降： 文件系统需要花费额外时间处理错误，导致读写变慢。 挂载失败： 损坏的文件系统可能无法被正确挂载。   二、检查文件系统错误的工具：fsckLinux 中用于检查和修复文件系统错误的主要工具是 fsck （file system check）。它实际上是一个前端程序，会根据文件系统的类型（如 ext4, xfs, fat32 等）自动调用相应的特定工具，例如 fsck.ext4, fsck.xfs 等。 重要原则：绝对不要在已挂载（mounted）的文件系统上运行 fsck，特别是读写状态下挂载的文件系统。 这可能导致数据进一步损坏或丢失。唯一的例外是根文件系统 /，在某些情况下需要在运行时以只读方式进行检查，但通常更推荐在系统启动时或进入恢复模式进行检查。 1. 检查和修复未被挂载的文件系统这是最安全和推荐的方式。 ...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/09/11/Linux%20%E6%8E%92%E6%9F%A5%E5%91%BD%E4%BB%A4/" title="Linux 排查命令"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-11</div><div class="info-item-2">Linux 排查命令</div></div><div class="info-2"><div class="info-item-1">(1) 如何在 Linux 中查看系统资源使用情况？比如内存、CPU、网络端口。  一、 CPU 使用情况1. top 命令 (实时交互式)top 命令是最常用的 CPU 监控工具，它提供了一个实时更新的进程列表，并显示 CPU 使用率、内存使用率、进程 ID (PID)、用户、运行时间等信息。 1top  关键信息解读：  第一行（top line）： load average 显示了过去 1、5、15 分钟的系统平均负载。这是衡量系统忙碌程度的重要指标，数值大于 CPU 核心数时通常表示系统存在瓶颈。 第二行（Tasks）： 显示进程总数，以及运行、睡眠、停止和僵尸进程的数量。 第三行（Cpu(s)）： 显示 CPU 的使用率，各项指标含义如下： us (user): 用户空间程序的 CPU 使用率。 sy (system): 内核空间程序的 CPU 使用率。 ni (nice): 改变过优先级的用户进程的 CPU 使用率。 id (idle): 空闲 CPU 百分比。 wa (iowait): CPU 等待 I&#x2F;O 操作完成的百分比。 hi (hardware i...</div></div></div></a><a class="pagination-related" href="/2025/09/11/Linux%20%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6%E9%94%99%E8%AF%AF%E4%BF%AE%E6%8A%A4/" title="Linux 系统文件错误修护"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-11</div><div class="info-item-2">Linux 系统文件错误修护</div></div><div class="info-2"><div class="info-item-1">修复 Linux 文件系统错误 一、文件系统错误的危害文件系统错误可能导致以下问题：  数据丢失或损坏： 文件内容错乱，甚至文件消失。 系统无法启动： 根文件系统损坏可能导致系统无法挂载核心目录。 应用程序崩溃： 读取到损坏文件或元数据引发应用程序错误。 性能下降： 文件系统需要花费额外时间处理错误，导致读写变慢。 挂载失败： 损坏的文件系统可能无法被正确挂载。   二、检查文件系统错误的工具：fsckLinux 中用于检查和修复文件系统错误的主要工具是 fsck （file system check）。它实际上是一个前端程序，会根据文件系统的类型（如 ext4, xfs, fat32 等）自动调用相应的特定工具，例如 fsck.ext4, fsck.xfs 等。 重要原则：绝对不要在已挂载（mounted）的文件系统上运行 fsck，特别是读写状态下挂载的文件系统。 这可能导致数据进一步损坏或丢失。唯一的例外是根文件系统 /，在某些情况下需要在运行时以只读方式进行检查，但通常更推荐在系统启动时或进入恢复模式进行检查。 1. 检查和修复未被挂载的文件系统这是最安全和推荐的方式。 ...</div></div></div></a><a class="pagination-related" href="/2025/09/11/CGroups%20%E4%B8%8E%20Namespaces/" title="CGroups 与 Namespaces"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-11</div><div class="info-item-2">CGroups 与 Namespaces</div></div><div class="info-2"><div class="info-item-1">CGroups 与 Namespaces本节我们来一起了解下容器背后的两个核心技术：CGroups 和 Namespace。 CGroups 概述CGroups 全称为 Linux Control Group，其作用是限制一组进程使用的资源（CPU、内存等）上限，CGroups 也是 Containerd 容器技术的核心实现原理之一，首先我们需要先了解几个 CGroups 的基本概念：  Task: 在 cgroup 中，task 可以理解为一个进程，但这里的进程和一般意义上的操作系统进程不太一样，实际上是进程 ID 和线程 ID 列表。 CGroup: 即控制组，一个控制组就是一组按照某种标准划分的 Tasks，可以理解为资源限制是以进程组为单位实现的，一个进程加入到某个控制组后，就会受到相应配置的资源限制。 Hierarchy: cgroup 的层级组织关系，cgroup 以树形层级组织，每个 cgroup 子节点默认继承其父 cgroup 节点的配置属性，这样每个 Hierarchy 在初始化会有 root cgroup。 Subsystem: 即子系统，子系统表示具体的资...</div></div></div></a><a class="pagination-related" href="/2025/09/11/Linux%20%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86%E6%9C%BA%E5%88%B6/" title="Linux 系统中的日志管理机制"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-11</div><div class="info-item-2">Linux 系统中的日志管理机制</div></div><div class="info-2"><div class="info-item-1">Linux 的日志管理机制 一、Linux 日志管理机制概述Linux 系统主要通过 rsyslog (或早期版本中的 syslog-ng, syslogd) 和 journald (systemd 日志管理器) 这两种机制来收集、处理和存储系统日志。 1. rsyslog (或 syslog-ng) 传统且广泛使用： rsyslog 是一个强大的日志处理工具，它能够从内核、应用程序和网络设备收集日志，并根据配置文件将日志写入到本地文件、转发到远程服务器或执行其他操作。 文件存储： 日志通常以纯文本形式存储在 /var/log 目录下，按类型分类。 配置文件： 主要配置文件是 /etc/rsyslog.conf。 日志轮转： 配合 logrotate 工具进行日志文件的轮转、压缩和清理，防止日志文件无限增长填满磁盘。  2. journald (systemd Journal) 现代 Linux 的核心日志系统： journald 是 systemd 组建的一部分，是现代 Linux 发行版（如 CentOS 7+, Ubuntu 15.04+）中默认的日志记录服务。 二进制存储...</div></div></div></a><a class="pagination-related" href="/2025/09/11/Linux%20%E4%B8%AD%20df%20%E4%B8%8E%20du%20%E5%8C%BA%E5%88%AB/" title="Linux 中 df 与 du 区别"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-11</div><div class="info-item-2">Linux 中 df 与 du 区别</div></div><div class="info-2"><div class="info-item-1">df 和 du 是日常工作中用于查看磁盘使用情况的两个最基本也是最重要的命令。它们都与磁盘空间有关，但它们的工作原理、关注点以及提供的信息维度截然不同。理解这两者的区别至关重要，因为它能帮助我们准确地判断磁盘空间问题，而不是被表象所迷惑。  一、df (disk free)df 命令用于报告文件系统的磁盘空间使用情况。它读取的是文件系统的超级块（superblock）信息，反映的是文件系统层面上的整体空间统计。 1. 核心特点： 报告文件系统总览： 关注的是整个文件系统（分区、挂载点）的使用情况。 读取文件系统元数据： 它直接查询文件系统的元数据（如 inode 表、块位图等），来得知已用、可用空间和总容量。 速度快： 由于只读取元数据，不遍历文件，所以执行速度通常很快。 计算已挂载文件系统： 只能报告已挂载的文件系统，包括本地磁盘、网络文件系统（NFS, Samba&#x2F;CIFS）、虚拟文件系统等。 显示已分配但未释放的空间： 如果文件被删除但仍被进程占用（即文件句柄未释放），df 会将这部分空间计入“已用”空间，因为它对文件系统来说这部分空间是“被占用的”。  2. 常...</div></div></div></a><a class="pagination-related" href="/2025/09/11/Linux%20%E7%BD%91%E7%BB%9C%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4%E6%80%9D%E8%B7%AF/" title="Linux 网络故障排除思路"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-11</div><div class="info-item-2">Linux 网络故障排除思路</div></div><div class="info-2"><div class="info-item-1">好的，作为一名资深运维工程师，当面对“服务无法访问，但服务器可以 Ping 通，且本地服务似乎运行正常”这类棘手的网络故障时，仅仅依赖 netstat 和简单的防火墙检查是不够的。我们需要更深入、更精细的工具来逐层剥离复杂性，找出问题的根源。这里我将扩展之前的故障排查，整合更多强大的工具，形成一个更全面的排除流程。  故障场景回顾与排查目标 现象： Web 服务（如 Nginx 监听 80 端口）从外部无法访问，但服务器能 Ping 通，服务进程显示运行正常，且本地 curl http://localhost:80 正常。 排查目标： 找出流量在哪里被阻挡了。是从客户端发出去就错了？还是在网络传输中丢失？还是在服务器端被防火墙拦截？或者服务进程本身的问题？   全面的多工具排查步骤阶段 1: 客户端测试与初步确认 ping &lt;server_ip&gt;  目的： 确认基本的网络连通性（二层&#x2F;三层）。 结果： 确认服务器可达。 备注： 如果 Ping 不通，问题可能在更底层：客户端网络配置、服务器网卡问题、路由器故障、防火墙完全禁用 ICMP 等。此时需要从网络拓扑...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">六一</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">274</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">22</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">45</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/huiaz"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux-%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E7%BD%91%E7%BB%9C%E6%8E%A5"><span class="toc-number">1.</span> <span class="toc-text">Linux 系统中的网络接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81Linux-%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3%E9%85%8D%E7%BD%AE%E6%A6%82%E8%BF%B0"><span class="toc-number">2.</span> <span class="toc-text">一、Linux 网络接口配置概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%9F%A5%E7%9C%8B%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3%E4%BF%A1%E6%81%AF"><span class="toc-number">3.</span> <span class="toc-text">二、查看网络接口信息</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-ip-addr-show-%E6%88%96-ip-a%EF%BC%9A%E6%9F%A5%E7%9C%8B%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3%E7%9A%84-IP-%E5%9C%B0%E5%9D%80%E5%92%8C%E7%8A%B6%E6%80%81"><span class="toc-number">3.1.</span> <span class="toc-text">1. ip addr show 或 ip a：查看网络接口的 IP 地址和状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-ip-route-show-%E6%88%96-ip-r%EF%BC%9A%E6%9F%A5%E7%9C%8B%E8%B7%AF%E7%94%B1%E8%A1%A8"><span class="toc-number">3.2.</span> <span class="toc-text">2. ip route show 或 ip r：查看路由表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-cat-etc-resolv-conf%EF%BC%9A%E6%9F%A5%E7%9C%8B-DNS-%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">3.3.</span> <span class="toc-text">3. cat &#x2F;etc&#x2F;resolv.conf：查看 DNS 服务器配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E4%B8%B4%E6%97%B6%E9%85%8D%E7%BD%AE%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3-%E4%BD%BF%E7%94%A8-ip-%E5%91%BD%E4%BB%A4"><span class="toc-number">4.</span> <span class="toc-text">三、临时配置网络接口 (使用 ip 命令)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%90%AF%E7%94%A8-%E7%A6%81%E7%94%A8%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3"><span class="toc-number">4.1.</span> <span class="toc-text">1. 启用&#x2F;禁用网络接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E9%85%8D%E7%BD%AE%E9%9D%99%E6%80%81-IP-%E5%9C%B0%E5%9D%80"><span class="toc-number">4.2.</span> <span class="toc-text">2. 配置静态 IP 地址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%88%A0%E9%99%A4-IP-%E5%9C%B0%E5%9D%80"><span class="toc-number">4.3.</span> <span class="toc-text">3. 删除 IP 地址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E9%85%8D%E7%BD%AE%E9%BB%98%E8%AE%A4%E7%BD%91%E5%85%B3"><span class="toc-number">4.4.</span> <span class="toc-text">4. 配置默认网关</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E5%88%A0%E9%99%A4%E9%BB%98%E8%AE%A4%E7%BD%91%E5%85%B3"><span class="toc-number">4.5.</span> <span class="toc-text">5. 删除默认网关</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E9%85%8D%E7%BD%AE-DNS-%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">4.6.</span> <span class="toc-text">6. 配置 DNS 服务器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%8C%81%E4%B9%85%E5%8C%96%E9%85%8D%E7%BD%AE%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3"><span class="toc-number">5.</span> <span class="toc-text">四、持久化配置网络接口</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Debian-Ubuntu-%E7%B3%BB%E5%88%97-etc-network-interfaces"><span class="toc-number">5.1.</span> <span class="toc-text">1. Debian&#x2F;Ubuntu 系列 (&#x2F;etc&#x2F;network&#x2F;interfaces)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-CentOS-RHEL-Fedora-%E7%B3%BB%E5%88%97-etc-sysconfig-network-scripts-ifcfg"><span class="toc-number">5.2.</span> <span class="toc-text">2. CentOS&#x2F;RHEL&#x2F;Fedora 系列 (&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-&lt;interface&gt;)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-Ubuntu-Server-18-04-Netplan-etc-netplan-yaml"><span class="toc-number">5.3.</span> <span class="toc-text">3. Ubuntu Server 18.04+ &#x2F; Netplan (&#x2F;etc&#x2F;netplan&#x2F;*.yaml)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-NetworkManager-%E6%A1%8C%E9%9D%A2%E7%8E%AF%E5%A2%83%E5%92%8C%E4%B8%80%E4%BA%9B%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">5.4.</span> <span class="toc-text">4. NetworkManager (桌面环境和一些服务器)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E9%85%8D%E7%BD%AE%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-number">6.</span> <span class="toc-text">五、配置最佳实践</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/27/hexo-beautify/" title="Hexo 博客美化笔记：从零搭建高颜值技术博客">Hexo 博客美化笔记：从零搭建高颜值技术博客</a><time datetime="2026-02-27T04:00:00.000Z" title="发表于 2026-02-27 12:00:00">2026-02-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/11/Jenkens-Blue%20Ocean%20%E6%8F%92%E4%BB%B6/" title="Jenkins Blue Ocean">Jenkins Blue Ocean</a><time datetime="2025-09-11T12:42:57.000Z" title="发表于 2025-09-11 20:42:57">2025-09-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/11/jenkins-jenkinsfile/" title="Jenkins Jenkinsfile">Jenkins Jenkinsfile</a><time datetime="2025-09-11T12:40:44.000Z" title="发表于 2025-09-11 20:40:44">2025-09-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/11/shell-trap/" title="Linux-trap">Linux-trap</a><time datetime="2025-09-11T12:40:44.000Z" title="发表于 2025-09-11 20:40:44">2025-09-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/11/shell-%E6%95%B0%E7%BB%84/" title="Shell-数组">Shell-数组</a><time datetime="2025-09-11T12:40:44.000Z" title="发表于 2025-09-11 20:40:44">2025-09-11</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 - 2026 By 六一</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.4</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.4"></script><script src="/js/main.js?v=5.5.4"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true}});</script></body></html>