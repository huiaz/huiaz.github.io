<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>ç½‘ç»œå‘½åç©ºé—´ | Hui's Blog</title><meta name="author" content="å…­ä¸€"><meta name="copyright" content="å…­ä¸€"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="ç†è§£ Linux ç½‘ç»œå‘½åç©ºé—´å¦‚æœä½ ä½¿ç”¨è¿‡ Docker å’Œ Kubernetesï¼Œé‚£ä¹ˆå¯èƒ½åº”è¯¥å¬è¯´è¿‡ network namespaceï¼ˆç½‘ç»œå‘½åç©ºé—´ï¼‰ï¼Œæœ€è¿‘åœ¨æˆ‘ä»¬çš„ ã€ŠKubernetes ç½‘ç»œè®­ç»ƒè¥ã€‹è¯¾ç¨‹ä¸­å­¦ä¹ åˆ°äº† Linux ä¸‹é¢çš„ ip å‘½ä»¤çš„ä½¿ç”¨ï¼Œæœ¬æ–‡æˆ‘å°†æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨å‘½ä»¤é€šè¿‡ä¸€å¯¹ veth æ¥å£è¿æ¥ä¸åŒå­ç½‘ä¸­çš„ç½‘ç»œå‘½åç©ºé—´çš„è¿›ç¨‹ã€‚ ç½‘ç»œå‘½åç©ºé—´æˆ‘ä»¬çŸ¥é“å®¹å™¨è¿è¡Œæ—¶ä½¿ç”¨ namespace">
<meta property="og:type" content="article">
<meta property="og:title" content="ç½‘ç»œå‘½åç©ºé—´">
<meta property="og:url" content="http://example.com/2025/09/11/%E7%BD%91%E7%BB%9C%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4/index.html">
<meta property="og:site_name" content="Hui&#39;s Blog">
<meta property="og:description" content="ç†è§£ Linux ç½‘ç»œå‘½åç©ºé—´å¦‚æœä½ ä½¿ç”¨è¿‡ Docker å’Œ Kubernetesï¼Œé‚£ä¹ˆå¯èƒ½åº”è¯¥å¬è¯´è¿‡ network namespaceï¼ˆç½‘ç»œå‘½åç©ºé—´ï¼‰ï¼Œæœ€è¿‘åœ¨æˆ‘ä»¬çš„ ã€ŠKubernetes ç½‘ç»œè®­ç»ƒè¥ã€‹è¯¾ç¨‹ä¸­å­¦ä¹ åˆ°äº† Linux ä¸‹é¢çš„ ip å‘½ä»¤çš„ä½¿ç”¨ï¼Œæœ¬æ–‡æˆ‘å°†æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨å‘½ä»¤é€šè¿‡ä¸€å¯¹ veth æ¥å£è¿æ¥ä¸åŒå­ç½‘ä¸­çš„ç½‘ç»œå‘½åç©ºé—´çš„è¿›ç¨‹ã€‚ ç½‘ç»œå‘½åç©ºé—´æˆ‘ä»¬çŸ¥é“å®¹å™¨è¿è¡Œæ—¶ä½¿ç”¨ namespace">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/butterfly-icon.png">
<meta property="article:published_time" content="2025-09-11T12:32:34.000Z">
<meta property="article:modified_time" content="2025-09-11T14:17:39.632Z">
<meta property="article:author" content="å…­ä¸€">
<meta property="article:tag" content="è¿ç»´">
<meta property="article:tag" content="k8s">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/butterfly-icon.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "ç½‘ç»œå‘½åç©ºé—´",
  "url": "http://example.com/2025/09/11/%E7%BD%91%E7%BB%9C%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4/",
  "image": "http://example.com/img/butterfly-icon.png",
  "datePublished": "2025-09-11T12:32:34.000Z",
  "dateModified": "2025-09-11T14:17:39.632Z",
  "author": [
    {
      "@type": "Person",
      "name": "å…­ä¸€",
      "url": "http://example.com"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2025/09/11/%E7%BD%91%E7%BB%9C%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.4"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶å¤±è´¥',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.13.0/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ç½‘ç»œå‘½åç©ºé—´',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">274</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">22</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">45</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Hui's Blog</span></a><a class="nav-page-title" href="/"><span class="site-name">ç½‘ç»œå‘½åç©ºé—´</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  è¿”å›é¦–é¡µ</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> About</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">ç½‘ç»œå‘½åç©ºé—´</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2025-09-11T12:32:34.000Z" title="å‘è¡¨äº 2025-09-11 20:32:34">2025-09-11</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2025-09-11T14:17:39.632Z" title="æ›´æ–°äº 2025-09-11 22:17:39">2025-09-11</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/k8s/">k8s</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/k8s/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">åŸºç¡€çŸ¥è¯†</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">æµè§ˆé‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="ç†è§£-Linux-ç½‘ç»œå‘½åç©ºé—´"><a href="#ç†è§£-Linux-ç½‘ç»œå‘½åç©ºé—´" class="headerlink" title="ç†è§£ Linux ç½‘ç»œå‘½åç©ºé—´"></a>ç†è§£ Linux ç½‘ç»œå‘½åç©ºé—´</h1><p>å¦‚æœä½ ä½¿ç”¨è¿‡ Docker å’Œ Kubernetesï¼Œé‚£ä¹ˆå¯èƒ½åº”è¯¥å¬è¯´è¿‡ network namespaceï¼ˆç½‘ç»œå‘½åç©ºé—´ï¼‰ï¼Œæœ€è¿‘åœ¨æˆ‘ä»¬çš„ <a target="_blank" rel="noopener" href="https://youdianzhishi.com/web/course/1021">ã€ŠKubernetes ç½‘ç»œè®­ç»ƒè¥ã€‹</a>è¯¾ç¨‹ä¸­å­¦ä¹ åˆ°äº† Linux ä¸‹é¢çš„ <code>ip</code> å‘½ä»¤çš„ä½¿ç”¨ï¼Œæœ¬æ–‡æˆ‘å°†æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨å‘½ä»¤é€šè¿‡ä¸€å¯¹ <code>veth</code> æ¥å£è¿æ¥ä¸åŒå­ç½‘ä¸­çš„ç½‘ç»œå‘½åç©ºé—´çš„è¿›ç¨‹ã€‚</p>
<h2 id="ç½‘ç»œå‘½åç©ºé—´"><a href="#ç½‘ç»œå‘½åç©ºé—´" class="headerlink" title="ç½‘ç»œå‘½åç©ºé—´"></a>ç½‘ç»œå‘½åç©ºé—´</h2><p>æˆ‘ä»¬çŸ¥é“å®¹å™¨è¿è¡Œæ—¶ä½¿ç”¨ namespaceï¼ˆå‘½åç©ºé—´ï¼‰å†…æ ¸åŠŸèƒ½å¯¹ç³»ç»Ÿèµ„æºè¿›è¡Œåˆ†åŒºï¼Œä»¥å®ç°æŸç§å½¢å¼çš„è¿›ç¨‹éš”ç¦»ï¼Œè¿™æ ·ï¼Œå¯¹ä¸€ä¸ªå‘½åç©ºé—´ä¸­èµ„æºçš„æ›´æ”¹ä¸ä¼šå½±å“å…¶ä»–å‘½åç©ºé—´ä¸­çš„èµ„æºï¼ŒåŒ…æ‹¬è¿›ç¨‹ IDã€ä¸»æœºåã€ç”¨æˆ· IDã€æ–‡ä»¶åå’Œç½‘ç»œæ¥å£ç­‰ã€‚</p>
<p>ç½‘ç»œåç§°ç©ºé—´å¯ä»¥è™šæ‹ŸåŒ–ç½‘ç»œå †æ ˆï¼Œæ¯ä¸ªç½‘ç»œåç§°ç©ºé—´éƒ½æœ‰è‡ªå·±çš„èµ„æºï¼Œä¾‹å¦‚ç½‘ç»œæ¥å£ã€IP åœ°å€ã€è·¯ç”±è¡¨ã€éš§é“ã€é˜²ç«å¢™ç­‰ï¼Œä¾‹å¦‚ï¼Œ<code>iptables</code>æ·»åŠ åˆ°ç½‘ç»œåç§°ç©ºé—´çš„è§„åˆ™åªä¼šå½±å“è¿›å…¥å’Œç¦»å¼€è¯¥åç§°ç©ºé—´çš„æµé‡ã€‚</p>
<h2 id="ip-å‘½ä»¤"><a href="#ip-å‘½ä»¤" class="headerlink" title="ip å‘½ä»¤"></a>ip å‘½ä»¤</h2><p><code>ip</code> å‘½ä»¤æ˜¯ç”¨æ¥æ˜¾ç¤ºæˆ–æ“çºµ Linux ä¸»æœºçš„è·¯ç”±ã€ç½‘ç»œè®¾å¤‡ã€ç­–ç•¥è·¯ç”±å’Œéš§é“ï¼Œæ˜¯ Linux ä¸‹è¾ƒæ–°çš„åŠŸèƒ½å¼ºå¤§çš„ç½‘ç»œé…ç½®å·¥å…·ã€‚</p>
<p>è¯¥å‘½ä»¤çš„ç”¨æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ip [OPTIONS] OBJECT COMMAND [ARGUMENTS]</span><br><span class="line"><span class="comment"># where</span></span><br><span class="line"><span class="comment">#   OPTIONS are general global options</span></span><br><span class="line"><span class="comment">#   OBJECT := &#123; link | address | addrlabel | route |</span></span><br><span class="line"><span class="comment">#     rule | neigh | ntable | tunnel | tuntap | maddress |</span></span><br><span class="line"><span class="comment">#     mroute | mrule | monitor | xfrm | netns | l2tp |</span></span><br><span class="line"><span class="comment">#     tcp_metrics &#125;</span></span><br><span class="line"><span class="comment">#   COMMAND is the action to perform on the object, such as,</span></span><br><span class="line"><span class="comment">#     show, add, del etc.</span></span><br><span class="line"><span class="comment">#   ARGUMENTS are arguments specific to the kind of OBJECT</span></span><br><span class="line"><span class="comment">#     and COMMAND</span></span><br></pre></td></tr></table></figure>

<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>è¦æ·»åŠ ä¸€ä¸ªæ–°çš„ç½‘ç»œæ¥å£ï¼Œä½¿ç”¨ <code>ip link add &lt;interface-name&gt; type &lt;interface-type&gt; &lt;interface-arguments&gt;...</code> å‘½ä»¤</li>
<li>è¦åˆ†é…ä¸€ä¸ªæ–°çš„ IP åœ°å€èŒƒå›´åˆ°ä¸€ä¸ªæ¥å£ï¼Œä½¿ç”¨ <code>ip addr add &lt;ip-address-range&gt; dev &lt;device-name&gt;</code> å‘½ä»¤</li>
<li>è¦ä»è·¯ç”±è¡¨ä¸­åˆ é™¤ä¸€æ¡è·¯ç”±ï¼Œä½¿ç”¨ <code>ip route del &lt;route-ip-range&gt; dev &lt;device-name&gt;</code> å‘½ä»¤</li>
</ul>
<p>é€‰é¡¹ <code>-n</code> å¯ä»¥ç”¨æ¥åˆ‡æ¢ç›®æ ‡å‘½åç©ºé—´ï¼Œä¾‹å¦‚ï¼Œè¦å°† <code>10.0.1.0/24</code> IP åœ°å€èŒƒå›´åˆ†é…ç»™ ns1 ç½‘ç»œå‘½åç©ºé—´å†…çš„æ¥å£ veth0ï¼Œä½¿ç”¨<code>ip -n ns1 addr add 10.0.1.0/24 dev veth0</code> å‘½ä»¤å³å¯ ã€‚</p>
<blockquote>
<p>ğŸ’¡ <code>-n</code> é€‰é¡¹æ˜¯ <code>ip netns exec</code> çš„ç¼©å†™</p>
</blockquote>
<p><img src="https://picdn.youdianzhishi.com/images/20201123114944.png" alt="img"></p>
<h2 id="é…ç½®ç¬¬ä¸€ä¸ªç½‘ç»œå‘½åç©ºé—´"><a href="#é…ç½®ç¬¬ä¸€ä¸ªç½‘ç»œå‘½åç©ºé—´" class="headerlink" title="é…ç½®ç¬¬ä¸€ä¸ªç½‘ç»œå‘½åç©ºé—´"></a>é…ç½®ç¬¬ä¸€ä¸ªç½‘ç»œå‘½åç©ºé—´</h2><p>é¦–å…ˆæˆ‘ä»¬ä½¿ç”¨ <code>ip link add</code> å‘½ä»¤åˆ›å»ºä¸€å¯¹æ–°çš„ veth æ¥å£ï¼šveth0 å’Œ veth1ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºä¸€å¯¹åä¸º veth0 å’Œ veth1 çš„ veth æ¥å£ã€‚</span></span><br><span class="line">$ ip <span class="built_in">link</span> add veth0 <span class="built_in">type</span> veth peer name veth1</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¡®è®¤ veth0 å·²åˆ›å»º</span></span><br><span class="line">$ ip <span class="built_in">link</span> show veth0</span><br><span class="line">289: veth0@veth1: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000</span><br><span class="line">    <span class="built_in">link</span>/ether 5e:87:<span class="built_in">df</span>:87:af:c7 brd ff:ff:ff:ff:ff:ff</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¡®è®¤ veth1 å·²åˆ›å»º</span></span><br><span class="line">$ ip <span class="built_in">link</span> show veth1</span><br><span class="line">288: veth1@veth0: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000</span><br><span class="line">    <span class="built_in">link</span>/ether be:0d:a4:8c:9f:2a brd ff:ff:ff:ff:ff:ff</span><br></pre></td></tr></table></figure>

<p>veth æ¥å£é€šå¸¸è¢«åˆ›å»ºä¸ºä¸€ä¸ªå¯¹ï¼Œå…¶ä¸­ä¸€ç«¯ä¼ è¾“çš„æ•°æ®ä¼šç«‹å³è¢«å¦ä¸€ç«¯æ¥æ”¶ï¼Œè¿™ç§ç±»å‹çš„æ¥å£åœ¨å®¹å™¨è¿è¡Œæ—¶é€šå¸¸ç”¨äºåœ¨ä¸åŒç½‘ç»œå‘½åç©ºé—´ä¹‹é—´ä¼ è¾“æ•°æ®åŒ…ã€‚</p>
<p>è®©æˆ‘ä»¬åˆ›å»ºç¬¬ä¸€ä¸ªç½‘ç»œå‘½åç©ºé—´ ns1ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥å°† veth0 æ¥å£åˆ†é…ç»™è¿™ä¸ªç½‘ç»œå‘½åç©ºé—´ï¼Œå¹¶å°† <code>10.0.1.0/24</code> çš„ IP åœ°å€èŒƒå›´åˆ†é…ç»™å®ƒã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»º ns1 ç½‘ç»œå‘½åç©ºé—´</span></span><br><span class="line">$ ip netns add ns1</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ†é… veth0 æ¥å£åˆ° ns1 ç½‘ç»œå‘½åç©ºé—´</span></span><br><span class="line">$ ip <span class="built_in">link</span> <span class="built_in">set</span> veth0 netns ns1</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°† 10.0.1.0/24 IP åœ°å€èŒƒå›´åˆ†é…ç»™ veth0 æ¥å£</span></span><br><span class="line">$ ip -n ns1 addr add 10.0.1.0/24 dev veth0</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°† veth0 æ¥å£ up èµ·æ¥</span></span><br><span class="line">$ ip -n ns1 <span class="built_in">link</span> <span class="built_in">set</span> veth0 up</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°† lo æ¥å£ up èµ·æ¥ï¼Œå› ä¸ºå‘å¾€ 10.0.1.0/24 çš„æ•°æ®ï¼ˆæœ¬åœ°çš„ï¼‰</span></span><br><span class="line"><span class="comment"># ï¼ˆåƒ pingï¼‰è¦é€šè¿‡ localï¼ˆæœ¬åœ°ï¼‰è·¯ç”±è¡¨</span></span><br><span class="line"><span class="comment"># æ¯”å¦‚è¦ ping è‡ªå·±</span></span><br><span class="line">$ ip -n ns1 <span class="built_in">link</span> <span class="built_in">set</span> lo up</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¡®è®¤æ¥å£å·²ç» up èµ·æ¥</span></span><br><span class="line">$ ip -n ns1 addr show</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    <span class="built_in">link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">289: veth0@if288: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state LOWERLAYERDOWN group default qlen 1000</span><br><span class="line">    <span class="built_in">link</span>/ether 5e:87:<span class="built_in">df</span>:87:af:c7 brd ff:ff:ff:ff:ff:ff link-netnsid 0</span><br><span class="line">    inet 10.0.1.0/24 scope global veth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨å¦‚æœæˆ‘ä»¬ä»ä¸»æœºå’Œ ns1 ä¸¤ä¸ªç½‘ç»œå‘½åç©ºé—´ä¸­å» ping veth0 æ¥å£ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># veth0 ä¸åœ¨ä¸»æœºçš„æ ¹ç½‘ç»œå‘½åç©ºé—´ä¸­</span></span><br><span class="line">$ ip <span class="built_in">link</span> show veth0</span><br><span class="line">Device <span class="string">&quot;veth0&quot;</span> does not exist.</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»ä¸»æœºç½‘ç»œå‘½åç©ºé—´ä¸­ ping ä¸é€š</span></span><br><span class="line">$ ping -c10 10.0.1.0</span><br><span class="line">PING 10.0.1.0 (10.0.1.0) 56(84) bytes of data.</span><br><span class="line">^C</span><br><span class="line">--- 10.0.1.0 ping statistics ---</span><br><span class="line">3 packets transmitted, 0 received, 100% packet loss, time 1999ms</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç›´æ¥åœ¨ä¸»æœºçš„æ ¹ç½‘ç»œå‘½åç©ºé—´ä¸­æ˜¯æ‰¾ä¸åˆ° veth0 è¿™ä¸ªæ¥å£çš„ï¼Œå½“ç„¶ä¹Ÿæ˜¯ ping ä¸åŒ <code>10.0.1.0</code> è¿™ä¸ªåœ°å€çš„ï¼Œå› ä¸ºä»–ä»¬è¢«ç»‘å®šåˆ° ns1 è¿™ä¸ªç½‘ç»œå‘½åç©ºé—´ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æ“ä½œçš„æ—¶å€™éœ€è¦åˆ‡æ¢åˆ°è¿™ä¸ªå‘½åç©ºé—´ä¸‹é¢ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ ip netns <span class="built_in">exec</span> ns1 ping -c10 10.0.1.0</span><br><span class="line">PING 10.0.1.0 (10.0.1.0) 56(84) bytes of data.</span><br><span class="line">64 bytes from 10.0.1.0: icmp_seq=1 ttl=64 time=0.121 ms</span><br><span class="line">64 bytes from 10.0.1.0: icmp_seq=2 ttl=64 time=0.063 ms</span><br><span class="line">64 bytes from 10.0.1.0: icmp_seq=3 ttl=64 time=0.066 ms</span><br><span class="line">64 bytes from 10.0.1.0: icmp_seq=4 ttl=64 time=0.109 ms</span><br><span class="line">^C</span><br><span class="line">--- 10.0.1.0 ping statistics ---</span><br><span class="line">4 packets transmitted, 4 received, 0% packet loss, time 3000ms</span><br><span class="line">rtt min/avg/max/mdev = 0.063/0.089/0.121/0.028 ms</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€æ¡ <code>ip netns exec</code> çš„å‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤å…è®¸æˆ‘ä»¬åœ¨æŒ‡å®šçš„ç½‘ç»œå‘½åç©ºé—´ä¸­å»æ‰§è¡Œä»»æ„çš„å‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°ç°åœ¨æˆ‘ä»¬åœ¨ ns1 ç½‘ç»œå‘½åç©ºä¸­é—´å» ping <code>10.0.1.0</code> å°±å¯ä»¥é€šäº†ã€‚</p>
<h2 id="é…ç½®ç¬¬äºŒä¸ªç½‘ç»œå‘½åç©ºé—´"><a href="#é…ç½®ç¬¬äºŒä¸ªç½‘ç»œå‘½åç©ºé—´" class="headerlink" title="é…ç½®ç¬¬äºŒä¸ªç½‘ç»œå‘½åç©ºé—´"></a>é…ç½®ç¬¬äºŒä¸ªç½‘ç»œå‘½åç©ºé—´</h2><p>ä¸‹é¢æˆ‘ä»¬ç”¨ä¸Šé¢çš„æ–¹å¼æ¥åˆ›å»ºç¬¬äºŒä¸ªç½‘ç»œå‘½åç©ºé—´ <code>ns2</code>ï¼Œç„¶åå°† veth1 æ¥å£åˆ†é…ç»™è¿™ä¸ªç½‘ç»œå‘½åç©ºé—´ï¼Œå¹¶å°† <code>10.0.2.0/24</code> çš„ IP åœ°å€èŒƒå›´åˆ†é…ç»™è¿™ä¸ªæ¥å£ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºåä¸º ns2 çš„ç½‘ç»œå‘½åç©ºé—´</span></span><br><span class="line">$ ip netns add ns2</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ†é… veth1 æ¥å£åˆ° ns2 ç½‘ç»œå‘½åç©ºé—´</span></span><br><span class="line">$ ip <span class="built_in">link</span> <span class="built_in">set</span> veth1 netns ns2</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°† 10.0.2.0/24 IP åœ°å€èŒƒå›´åˆ†é…ç»™ veth1 æ¥å£</span></span><br><span class="line">$ ip -n ns2 addr add 10.0.2.0/24 dev veth1</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°† veth1 æ¥å£ up èµ·æ¥</span></span><br><span class="line">$ ip -n ns2 <span class="built_in">link</span> <span class="built_in">set</span> veth1 up</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°† lo å£ up èµ·æ¥ï¼ˆè¿™æ ·å¯ä»¥ ping é€šè‡ªå·±ï¼‰</span></span><br><span class="line">$ ip -n ns2 <span class="built_in">link</span> <span class="built_in">set</span> lo up</span><br><span class="line"></span><br><span class="line">$ ip -n ns2 addr show</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    <span class="built_in">link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">288: veth1@if289: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000</span><br><span class="line">    <span class="built_in">link</span>/ether be:0d:a4:8c:9f:2a brd ff:ff:ff:ff:ff:ff link-netnsid 0</span><br><span class="line">    inet 10.0.2.0/24 scope global veth1</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::bc0d:a4ff:fe8c:9f2a/64 scope <span class="built_in">link</span></span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>

<p>ä¸ºæ–¹ä¾¿åé¢è®¾ç½®è·¯ç”±ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸º veth1 æ¥å£åˆ†é…ä¸€ä¸ªä¸åŒçš„å­ç½‘ IP èŒƒå›´ã€‚å’Œ veth0 æ¥å£ç±»ä¼¼ï¼Œveth1 æ¥å£ä¹Ÿä¸èƒ½ä»ä¸»æœºç½‘ç»œå‘½åç©ºé—´åˆ°è¾¾ï¼Œåªèƒ½åœ¨ ns2 æœ¬èº«çš„ç½‘ç»œå‘½åç©ºé—´å†…å·¥ä½œã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ ip <span class="built_in">link</span> show veth1</span><br><span class="line">Device <span class="string">&quot;veth1&quot;</span> does not exist.</span><br><span class="line">$ ping -c10 10.0.2.0</span><br><span class="line">PING 10.0.2.0 (10.0.2.0) 56(84) bytes of data.</span><br><span class="line">From 180.149.159.13 icmp_seq=2 Packet filtered</span><br><span class="line">^C</span><br><span class="line">--- 10.0.2.0 ping statistics ---</span><br><span class="line">2 packets transmitted, 0 received, +1 errors, 100% packet loss, time 999</span><br><span class="line">$ ip netns <span class="built_in">exec</span> ns2 ping -c10 10.0.2.0</span><br><span class="line">PING 10.0.2.0 (10.0.2.0) 56(84) bytes of data.</span><br><span class="line">64 bytes from 10.0.2.0: icmp_seq=1 ttl=64 time=0.100 ms</span><br><span class="line">64 bytes from 10.0.2.0: icmp_seq=2 ttl=64 time=0.096 ms</span><br><span class="line">64 bytes from 10.0.2.0: icmp_seq=3 ttl=64 time=0.068 ms</span><br><span class="line">^C</span><br><span class="line">--- 10.0.2.0 ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 1999ms</span><br><span class="line">rtt min/avg/max/mdev = 0.068/0.088/0.100/0.014 ms</span><br></pre></td></tr></table></figure>

<h2 id="é…ç½®å­ç½‘è·¯ç”±"><a href="#é…ç½®å­ç½‘è·¯ç”±" class="headerlink" title="é…ç½®å­ç½‘è·¯ç”±"></a>é…ç½®å­ç½‘è·¯ç”±</h2><p>è™½ç„¶åœ¨ä¸Šé¢çš„ä¸¤ä¸ªç½‘ç»œç©ºé—´å†…å¯ä»¥å„è‡ªè®¿é—®è‡ªå·±ï¼Œä½†æ˜¯ä»–ä»¬äº’ç›¸ä¹‹é—´æ˜¯ä¸èƒ½ ping é€šçš„ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ip netns <span class="built_in">exec</span> ns1 ping -c10 10.0.2.0</span><br><span class="line">connect: Network is unreachable</span><br><span class="line">$ ip netns <span class="built_in">exec</span> ns2 ping -c10 10.0.1.0</span><br><span class="line">connect: Network is unreachable</span><br></pre></td></tr></table></figure>

<p>veth0 å’Œ veth1 è¿™ä¸¤ä¸ªæ¥å£æœ¬èº«ä¹Ÿéƒ½ up èµ·æ¥äº†ï¼Œè€Œä¸”åœ¨å„ç§çš„ç½‘ç»œå‘½åç©ºé—´ä¸­ ping ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œï¼Œæ‰€ä»¥äº’ç›¸ç›´æ¥ä¸é€šé‚£å¾ˆå¯èƒ½å’Œè·¯ç”±æœ‰å…³ã€‚ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨ ip å‘½ä»¤æ¥è°ƒè¯•ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>ip route get</code> å‘½ä»¤æ¥ç¡®å®šä¸€ä¸ªæ•°æ®åŒ…æ‰€èµ°çš„è·¯ç”±ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ip -n ns1 route get 10.0.2.0</span><br><span class="line">RTNETLINK answers: Network is unreachable</span><br><span class="line">$ ip -n ns2 route get 10.0.1.0</span><br><span class="line">RTNETLINK answers: Network is unreachable</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°éƒ½æ˜¯ç½‘ç»œä¸å¯è¾¾ï¼Œæˆ‘ä»¬æ¥æ£€æŸ¥ä¸‹ä¸¤ä¸ªç½‘ç»œå‘½åç©ºé—´ä¸­çš„è·¯ç”±è¡¨ä¿¡æ¯ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ip -n ns1 route</span><br><span class="line">10.0.1.0/24 dev veth0 proto kernel scope <span class="built_in">link</span> src 10.0.1.0</span><br><span class="line">$ ip -n ns2 route</span><br><span class="line">10.0.2.0/24 dev veth1 proto kernel scope <span class="built_in">link</span> src 10.0.2.0</span><br></pre></td></tr></table></figure>

<p>çœ‹åˆ°è·¯ç”±è¡¨æ˜¯ä¸æ˜¯å¾ˆæ¸…æ™°äº†ï¼Œä¸¤ä¸ªç½‘ç»œå‘½åç©ºé—´çš„è·¯ç”±è¡¨éƒ½åªæœ‰å„è‡ª IP èŒƒå›´çš„è·¯ç”±æ¡ç›®ï¼Œå¹¶æ²¡æœ‰é€šå¾€å…¶ä»–å­ç½‘çš„è·¯ç”±ï¼Œæ‰€ä»¥å½“ç„¶ä¸èƒ½äº’é€šäº†ï¼Œè¦è§£å†³ä¹Ÿå¾ˆç®€å•ï¼Œå¯ä»¥ä½¿ç”¨ <code>ip route add</code> å‘½ä»¤åœ¨è·¯ç”±è¡¨ä¸­æ’å…¥æ–°çš„è·¯ç”±æ¡ç›®æ˜¯ä¸æ˜¯å°±å¯ä»¥äº†ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ›´æ–° veth0 è·¯ç”±è¡¨ï¼Œæ·»åŠ ä¸€æ¡é€šå¾€ 10.0.2.0/24 çš„è·¯ç”±</span></span><br><span class="line">$ ip -n ns1 route add 10.0.2.0/24 dev veth0</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¡®è®¤å‘å¾€ 10.0.2.0/24 çš„æ•°æ®åŒ…è¢«è·¯ç”±åˆ° veth0</span></span><br><span class="line">$ ip -n ns1 route get 10.0.2.0</span><br><span class="line">10.0.2.0 dev veth0 src 10.0.1.0</span><br><span class="line">    cache</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŒæ ·æ›´æ–° veth1 è·¯ç”±è¡¨ï¼Œæ·»åŠ ä¸€æ¡é€šå¾€ 10.0.1.0/24 çš„è·¯ç”±</span></span><br><span class="line">$ ip -n ns2 route add 10.0.1.0/24 dev veth1</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¡®è®¤å‘å¾€ 10.0.1.0/24 çš„æ•°æ®åŒ…è¢«è·¯ç”±åˆ° veth1</span></span><br><span class="line">$ ip -n ns2 route get 10.0.1.0</span><br><span class="line">10.0.1.0 dev veth1 src 10.0.2.0</span><br><span class="line">    cache</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢æˆ‘ä»¬åœ¨å„è‡ªçš„ç½‘ç»œå‘½åç©ºé—´ä¸­æ·»åŠ äº†å¯¹æ–¹çš„è·¯ç”±ä¿¡æ¯ï¼Œç°åœ¨æˆ‘ä»¬æ¥å°è¯• ping ä¸‹å¯¹æ–¹çš„ veth æ¥å£ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ ip netns <span class="built_in">exec</span> ns1 ping -c10 10.0.2.0</span><br><span class="line">PING 10.0.2.0 (10.0.2.0) 56(84) bytes of data.</span><br><span class="line">64 bytes from 10.0.2.0: icmp_seq=1 ttl=64 time=0.140 ms</span><br><span class="line">64 bytes from 10.0.2.0: icmp_seq=2 ttl=64 time=0.080 ms</span><br><span class="line">64 bytes from 10.0.2.0: icmp_seq=3 ttl=64 time=0.091 ms</span><br><span class="line">^C</span><br><span class="line">--- 10.0.2.0 ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 1999ms</span><br><span class="line">rtt min/avg/max/mdev = 0.080/0.103/0.140/0.028 ms</span><br><span class="line"></span><br><span class="line">$ ip netns <span class="built_in">exec</span> ns2 ping -c10 10.0.1.0</span><br><span class="line">PING 10.0.1.0 (10.0.1.0) 56(84) bytes of data.</span><br><span class="line">64 bytes from 10.0.1.0: icmp_seq=1 ttl=64 time=0.114 ms</span><br><span class="line">64 bytes from 10.0.1.0: icmp_seq=2 ttl=64 time=0.084 ms</span><br><span class="line">64 bytes from 10.0.1.0: icmp_seq=3 ttl=64 time=0.086 ms</span><br><span class="line">^C</span><br><span class="line">--- 10.0.1.0 ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 2000ms</span><br><span class="line">rtt min/avg/max/mdev = 0.084/0.094/0.114/0.017 ms</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°å·²ç»é€šå•¦ï¼ï¼ğŸ‰ğŸ‰ğŸ‰</p>
<p>æ­¤å¤–æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ <code>tcpdump</code> æ¥æ•è·ä¸¤ä¸ªç½‘ç»œå‘½åç©ºé—´ä¹‹é—´ä¼ è¾“çš„æ•°æ®åŒ…ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">$ ip netns <span class="built_in">exec</span> ns1 tcpdump -i veth0 icmp -l</span><br><span class="line">tcpdump: verbose output suppressed, use -v or -vv <span class="keyword">for</span> full protocol decode</span><br><span class="line">listening on veth0, link-type EN10MB (Ethernet), capture size 262144 bytes</span><br><span class="line">11:29:22.080392 IP 10.0.2.0 &gt; 10.0.1.0: ICMP <span class="built_in">echo</span> request, <span class="built_in">id</span> 7253, <span class="built_in">seq</span> 1, length 64</span><br><span class="line">11:29:22.080464 IP 10.0.1.0 &gt; 10.0.2.0: ICMP <span class="built_in">echo</span> reply, <span class="built_in">id</span> 7253, <span class="built_in">seq</span> 1, length 64</span><br><span class="line">11:29:23.080409 IP 10.0.2.0 &gt; 10.0.1.0: ICMP <span class="built_in">echo</span> request, <span class="built_in">id</span> 7253, <span class="built_in">seq</span> 2, length 64</span><br><span class="line">11:29:23.080472 IP 10.0.1.0 &gt; 10.0.2.0: ICMP <span class="built_in">echo</span> reply, <span class="built_in">id</span> 7253, <span class="built_in">seq</span> 2, length 64</span><br><span class="line">11:29:24.080357 IP 10.0.2.0 &gt; 10.0.1.0: ICMP <span class="built_in">echo</span> request, <span class="built_in">id</span> 7253, <span class="built_in">seq</span> 3, length 64</span><br><span class="line">11:29:24.080418 IP 10.0.1.0 &gt; 10.0.2.0: ICMP <span class="built_in">echo</span> reply, <span class="built_in">id</span> 7253, <span class="built_in">seq</span> 3, length 64</span><br><span class="line">11:29:25.080346 IP 10.0.2.0 &gt; 10.0.1.0: ICMP <span class="built_in">echo</span> request, <span class="built_in">id</span> 7253, <span class="built_in">seq</span> 4, length 64</span><br><span class="line">11:29:25.080401 IP 10.0.1.0 &gt; 10.0.2.0: ICMP <span class="built_in">echo</span> reply, <span class="built_in">id</span> 7253, <span class="built_in">seq</span> 4, length 64</span><br><span class="line">11:29:26.080417 IP 10.0.2.0 &gt; 10.0.1.0: ICMP <span class="built_in">echo</span> request, <span class="built_in">id</span> 7253, <span class="built_in">seq</span> 5, length 64</span><br><span class="line">11:29:26.080496 IP 10.0.1.0 &gt; 10.0.2.0: ICMP <span class="built_in">echo</span> reply, <span class="built_in">id</span> 7253, <span class="built_in">seq</span> 5, length 64</span><br><span class="line">11:29:27.080454 IP 10.0.2.0 &gt; 10.0.1.0: ICMP <span class="built_in">echo</span> request, <span class="built_in">id</span> 7253, <span class="built_in">seq</span> 6, length 64</span><br><span class="line">11:29:27.080507 IP 10.0.1.0 &gt; 10.0.2.0: ICMP <span class="built_in">echo</span> reply, <span class="built_in">id</span> 7253, <span class="built_in">seq</span> 6, length 64</span><br><span class="line">11:29:28.080398 IP 10.0.2.0 &gt; 10.0.1.0: ICMP <span class="built_in">echo</span> request, <span class="built_in">id</span> 7253, <span class="built_in">seq</span> 7, length 64</span><br><span class="line">11:29:28.080456 IP 10.0.1.0 &gt; 10.0.2.0: ICMP <span class="built_in">echo</span> reply, <span class="built_in">id</span> 7253, <span class="built_in">seq</span> 7, length 64</span><br><span class="line">11:29:29.080390 IP 10.0.2.0 &gt; 10.0.1.0: ICMP <span class="built_in">echo</span> request, <span class="built_in">id</span> 7253, <span class="built_in">seq</span> 8, length 64</span><br><span class="line">11:29:29.080431 IP 10.0.1.0 &gt; 10.0.2.0: ICMP <span class="built_in">echo</span> reply, <span class="built_in">id</span> 7253, <span class="built_in">seq</span> 8, length 64</span><br><span class="line">11:29:30.080524 IP 10.0.2.0 &gt; 10.0.1.0: ICMP <span class="built_in">echo</span> request, <span class="built_in">id</span> 7253, <span class="built_in">seq</span> 9, length 64</span><br><span class="line">11:29:30.080576 IP 10.0.1.0 &gt; 10.0.2.0: ICMP <span class="built_in">echo</span> reply, <span class="built_in">id</span> 7253, <span class="built_in">seq</span> 9, length 64</span><br><span class="line">11:29:31.081895 IP 10.0.2.0 &gt; 10.0.1.0: ICMP <span class="built_in">echo</span> request, <span class="built_in">id</span> 7253, <span class="built_in">seq</span> 10, length 64</span><br><span class="line">11:29:31.081942 IP 10.0.1.0 &gt; 10.0.2.0: ICMP <span class="built_in">echo</span> reply, <span class="built_in">id</span> 7253, <span class="built_in">seq</span> 10, length 64</span><br><span class="line">^C</span><br><span class="line">20 packets captured</span><br><span class="line">20 packets received by filter</span><br><span class="line">0 packets dropped by kernel</span><br></pre></td></tr></table></figure>

<h2 id="TCP-è¿æ¥"><a href="#TCP-è¿æ¥" class="headerlink" title="TCP è¿æ¥"></a>TCP è¿æ¥</h2><p>æœ€å¥½æˆ‘ä»¬æ¥æµ‹è¯•ä¸‹ TCP è¿æ¥ï¼Œä½¿ç”¨ nc å‘½ä»¤åœ¨ ns1 å‘½åç©ºé—´çš„ 7096 ç«¯å£å¯åŠ¨ä¸€ä¸ª TCP æœåŠ¡å™¨ï¼Œç„¶åä» ns2 ç½‘ç»œå‘½åç©ºé—´å‘èµ·ä¸€ä¸ª TCP æ¡æ‰‹è¿æ¥ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ip netns <span class="built_in">exec</span> ns1 nc -l 10.0.1.0 7096 -v</span><br><span class="line"><span class="built_in">exec</span> of <span class="string">&quot;nc&quot;</span> failed: No such file or directory</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢å‘½ä»¤æŠ¥é”™æ˜¯å› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰å®‰è£… ns è¿™ä¸ªå·¥å…·ï¼Œå®‰è£…å®Œæˆåå°±æ­£å¸¸äº†ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ yum install -y nc</span><br><span class="line"></span><br><span class="line">$ ip netns <span class="built_in">exec</span> ns1 nc -l 10.0.1.0 7096 -v</span><br><span class="line">Ncat: Version 7.50 ( https://nmap.org/ncat )</span><br><span class="line">Ncat: Listening on 10.0.1.0:7096</span><br></pre></td></tr></table></figure>

<p>ç„¶åé‡æ–°å¼€ä¸€ä¸ªç»ˆç«¯è¿›è¡Œè¿æ¥ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ nc ä» ns2 å‘èµ· TCP æ¡æ‰‹</span></span><br><span class="line">$ ip netns <span class="built_in">exec</span> ns2 nc -4t 10.0.1.0 7096 -v</span><br><span class="line">Ncat: Version 7.50 ( https://nmap.org/ncat )</span><br><span class="line">Ncat: Connected to 10.0.1.0:7096.</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™ä¸ªæ—¶å€™æ­£å¸¸ä¼šåœ¨å‰é¢çš„æœåŠ¡ä¸­çœ‹åˆ°è¿æ¥çŠ¶æ€</span></span><br><span class="line">$ ip netns <span class="built_in">exec</span> ns1 nc -l 10.0.1.0 7096 -v</span><br><span class="line">Ncat: Version 7.50 ( https://nmap.org/ncat )</span><br><span class="line">Ncat: Listening on 10.0.1.0:7096</span><br><span class="line">Ncat: Connection from 10.0.2.0.</span><br><span class="line">Ncat: Connection from 10.0.2.0:34090.</span><br></pre></td></tr></table></figure>

<p>ä¸€æ—¦ TCP è¿æ¥å»ºç«‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä» ns2 å‘ ns1 å‘é€æµ‹è¯•æ¶ˆæ¯äº†ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ip netns <span class="built_in">exec</span> ns2 nc -4t 10.0.1.0 7096 -v</span><br><span class="line">Ncat: Version 7.50 ( https://nmap.org/ncat )</span><br><span class="line">Ncat: Connected to 10.0.1.0:7096.</span><br><span class="line">this is a <span class="built_in">test</span> message  <span class="comment"># åœ¨è¿™é‡Œè¾“å…¥ä¸€æ®µä¿¡æ¯</span></span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶æˆ‘ä»¬åœ¨ ns1 è¿™è¾¹çš„æœåŠ¡å™¨ç«¯ä¹Ÿä¼šæ”¶åˆ°å‘é€çš„æ¶ˆæ¯ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ ip netns <span class="built_in">exec</span> ns1 nc -l 10.0.1.0 7096 -v</span><br><span class="line">Ncat: Version 7.50 ( https://nmap.org/ncat )</span><br><span class="line">Ncat: Listening on 10.0.1.0:7096</span><br><span class="line">Ncat: Connection from 10.0.2.0.</span><br><span class="line">Ncat: Connection from 10.0.2.0:34090.</span><br><span class="line">this is a <span class="built_in">test</span> message</span><br></pre></td></tr></table></figure>

<p>åŒæ ·æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ tcpdump æ¥æŠ“å–æ‰€æœ‰åœ¨ä¸¤ä¸ªç½‘ç»œå‘½åç©ºé—´ä¹‹é—´ä¼ è¾“çš„æ•°æ®åŒ…ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ ip netns <span class="built_in">exec</span> ns1 tcpdump -X -i veth0 -n tcp -l</span><br><span class="line">tcpdump: verbose output suppressed, use -v or -vv <span class="keyword">for</span> full protocol decode</span><br><span class="line">listening on veth0, link-type EN10MB (Ethernet), capture size 262144 bytes</span><br><span class="line">11:42:59.912176 IP 10.0.2.0.34090 &gt; 10.0.1.0.7096: Flags [P.], <span class="built_in">seq</span> 118819706:118819735, ack 1587208228, win 229, options [nop,nop,TS val 1970393377 ecr 1970365937], length 29</span><br><span class="line">	0x0000:  4500 0051 ad52 4000 4006 7655 0a00 0200  E..Q.R@.@.vU....</span><br><span class="line">	0x0010:  0a00 0100 852a 1bb8 0715 0b7a 5e9a e024  .....*.....z^..$</span><br><span class="line">	0x0020:  8018 00e5 1743 0000 0101 080a 7571 d121  .....C......uq.!</span><br><span class="line">	0x0030:  7571 65f1 7468 6973 2069 7320 616e 6f74  uqe.this.is.anot</span><br><span class="line">	0x0040:  6865 7220 7465 7374 206d 6573 7361 6765  her.test.message</span><br><span class="line">	0x0050:  0a                                       .</span><br><span class="line">11:42:59.912207 IP 10.0.1.0.7096 &gt; 10.0.2.0.34090: Flags [.], ack 29, win 227, options [nop,nop,TS val 1970393377 ecr 1970393377], length 0</span><br><span class="line">	0x0000:  4500 0034 4612 4000 4006 ddb2 0a00 0100  E..4F.@.@.......</span><br><span class="line">	0x0010:  0a00 0200 1bb8 852a 5e9a e024 0715 0b97  .......*^..$....</span><br><span class="line">	0x0020:  8010 00e3 1726 0000 0101 080a 7571 d121  .....&amp;......uq.!</span><br><span class="line">	0x0030:  7571 d121                                uq.!</span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ä¹Ÿå¯ä»¥å°†è¿™ä¸ªæŠ“åŒ…ç»“æœä¿å­˜ä¸‹æ¥ç„¶åç”¨å…¶ä»–å·¥å…·æ¯”å¦‚å¤§ç™½é²¨æ¥è¿›è¡Œè¯¦ç»†çš„åˆ†æã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬æ–‡æˆ‘ä»¬ä½¿ç”¨ ip å­å‘½ä»¤å¯ä»¥ç”¨æ¥åˆ›å»ºå’Œé…ç½®ç½‘ç»œå‘½åç©ºé—´ã€æ¥å£å’Œè·¯ç”±ç­‰ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€å¯¹ veth æ¥å£ï¼Œè¿™äº›æ¥å£è¢«åˆ†é…åˆ°ä¸¤ä¸ªä¸åŒçš„ç½‘ç»œå‘½åç©ºé—´ä¸­ï¼Œå…·æœ‰ä¸åŒçš„å­ç½‘ IP åœ°å€èŒƒå›´ï¼Œåœ¨ç½‘ç»œå‘½åç©ºé—´çš„è·¯ç”±è¡¨ä¸­é…ç½®äº†é¢å¤–çš„è·¯ç”±ï¼Œè¿™å¯ä»¥å®ç°ä¸¤ä¸ªå­ç½‘ä¹‹é—´çš„é€šä¿¡ã€‚</p>
<p>ä¸¤ä¸ª veth æ¥å£éƒ½æ— æ³•ä»ä¸»æœºç½‘ç»œå‘½åç©ºé—´ç›´æ¥åˆ°è¾¾ï¼Œå› ä¸ºå®ƒä»¬çš„ IP åœ°å€èŒƒå›´å’Œè·¯ç”±è¡¨çš„å˜åŒ–ä¹Ÿè¢«éš”ç¦»åœ¨è‡ªå·±çš„ç½‘ç»œå‘½åç©ºé—´ä¸­äº†ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>ip netns exec</code> å‘½ä»¤è¿è¡Œå·¥å…·å’Œ tcpdump æ¥è°ƒè¯•ç½‘ç»œå‘½åç©ºé—´ä¹‹é—´çš„è¿æ¥é—®é¢˜ã€‚</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="http://example.com">å…­ä¸€</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://example.com/2025/09/11/%E7%BD%91%E7%BB%9C%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4/">http://example.com/2025/09/11/%E7%BD%91%E7%BB%9C%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº <a href="http://example.com" target="_blank">Hui's Blog</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%BF%90%E7%BB%B4/">è¿ç»´</a><a class="post-meta__tags" href="/tags/k8s/">k8s</a></div><div class="post-share"><div class="social-share" data-image="/img/butterfly-icon.png" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/09/11/%E8%81%9A%E5%90%88/" title="èšåˆ"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">ä¸Šä¸€ç¯‡</div><div class="info-item-2">èšåˆ</div></div><div class="info-2"><div class="info-item-1">èšåˆæˆ‘ä»¬çŸ¥é“ Prometheus çš„æ—¶é—´åºåˆ—æ•°æ®æ˜¯å¤šç»´æ•°æ®æ¨¡å‹ï¼Œæˆ‘ä»¬ç»å¸¸å°±æœ‰æ ¹æ®å„ä¸ªç»´åº¦è¿›è¡Œæ±‡æ€»çš„éœ€æ±‚ã€‚ åŸºäºæ ‡ç­¾èšåˆä¾‹å¦‚æˆ‘ä»¬æƒ³çŸ¥é“æˆ‘ä»¬çš„ demo æœåŠ¡æ¯ç§’å¤„ç†çš„è¯·æ±‚æ•°ï¼Œé‚£ä¹ˆå¯ä»¥å°†å•ä¸ªçš„é€Ÿç‡ç›¸åŠ å°±å¯ä»¥ã€‚ 1sum(rate(demo_api_request_duration_seconds_count&#123;job=&quot;demo&quot;&#125;[5m]))    å¯ä»¥å¾—åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„ç»“æœï¼š  ä½†æ˜¯æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç»˜åˆ¶å‡ºæ¥çš„å›¾å½¢æ²¡æœ‰ä¿ç•™ä»»ä½•æ ‡ç­¾ç»´åº¦ï¼Œä¸€èˆ¬æ¥è¯´å¯èƒ½æˆ‘ä»¬å¸Œæœ›ä¿ç•™ä¸€äº›ç»´åº¦ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯èƒ½æ›´å¸Œæœ›è®¡ç®—æ¯ä¸ª instance å’Œ path çš„å˜åŒ–ç‡ï¼Œä½†å¹¶ä¸å…³å¿ƒå•ä¸ª method æˆ–è€… status çš„ç»“æœï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥åœ¨ sum() èšåˆå™¨ä¸­æ·»åŠ ä¸€ä¸ª without() çš„ä¿®é¥°ç¬¦ï¼š 1sum without(method, status) (rate(demo_api_request_duration_seconds_count&#123;job=&quot;demo&quot;&#125;[5m]))    ä¸Šé¢çš„æŸ¥è¯¢è¯­å¥ç›¸å½“äºç”¨ by() ä¿®é¥°ç¬¦æ¥ä¿ç•™...</div></div></div></a><a class="pagination-related" href="/2025/09/11/%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/" title="ç£ç›˜ç®¡ç†"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">ä¸‹ä¸€ç¯‡</div><div class="info-item-2">ç£ç›˜ç®¡ç†</div></div><div class="info-2"><div class="info-item-1">Linux ç³»ç»Ÿä¸­çš„ç£ç›˜ç®¡ç† ä¸€ã€æŸ¥çœ‹ç£ç›˜åˆ†åŒºä¿¡æ¯åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œæœ‰å¤šç§å‘½ä»¤å¯ä»¥æŸ¥çœ‹ç£ç›˜å’Œåˆ†åŒºçš„ä¿¡æ¯ã€‚ 1. lsblkï¼šåˆ—å‡ºå—è®¾å¤‡ä¿¡æ¯ï¼ˆæœ€å¸¸ç”¨ã€æœ€ç›´è§‚ï¼‰lsblk å‘½ä»¤ä»¥æ ‘çŠ¶ç»“æ„åˆ—å‡ºæ‰€æœ‰å—è®¾å¤‡ï¼ˆåŒ…æ‹¬ç£ç›˜ã€åˆ†åŒºã€RAIDè®¾å¤‡ã€LVMé€»è¾‘å·ç­‰ï¼‰ï¼Œæ¸…æ™°åœ°å±•ç¤ºäº†è®¾å¤‡ä¹‹é—´çš„å±‚æ¬¡å…³ç³»ã€‚ 1lsblk  ç¤ºä¾‹è¾“å‡ºåŠè§£é‡Šï¼š 12345678910NAME        MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTsda           8:0    0   200G  0 disk â”œâ”€sda1        8:1    0     1G  0 part /bootâ”œâ”€sda2        8:2    0     4G  0 part [SWAP]â””â”€sda3        8:3    0 195.9G  0 part   â”œâ”€vg01-root 253:0    0    50G  0 lvm  /  â””â”€vg01-home 253:1    0 145.9G  0 lvm  /homesdb           8:16   0     1T...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/09/11/OpenKruise/" title="OpenKruise"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-11</div><div class="info-item-2">OpenKruise</div></div><div class="info-2"><div class="info-item-1">OpenKruiseOpenKruise æ˜¯ä¸€ä¸ªåŸºäº Kubernetes çš„æ‰©å±•å¥—ä»¶ï¼Œä¸»è¦èšç„¦äºäº‘åŸç”Ÿåº”ç”¨çš„è‡ªåŠ¨åŒ–ï¼Œæ¯”å¦‚éƒ¨ç½²ã€å‘å¸ƒã€è¿ç»´ä»¥åŠå¯ç”¨æ€§é˜²æŠ¤ã€‚OpenKruise æä¾›çš„ç»å¤§éƒ¨åˆ†èƒ½åŠ›éƒ½æ˜¯åŸºäº CRD æ‰©å±•æ¥å®šä¹‰çš„ï¼Œå®ƒä»¬ä¸å­˜åœ¨äºä»»ä½•å¤–éƒ¨ä¾èµ–ï¼Œå¯ä»¥è¿è¡Œåœ¨ä»»æ„çº¯å‡€çš„ Kubernetes é›†ç¾¤ä¸­ã€‚Kubernetes è‡ªèº«æä¾›çš„ä¸€äº›åº”ç”¨éƒ¨ç½²ç®¡ç†åŠŸèƒ½ï¼Œå¯¹äºå¤§è§„æ¨¡åº”ç”¨ä¸é›†ç¾¤çš„åœºæ™¯è¿™äº›åŠŸèƒ½æ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼ŒOpenKruise å¼¥è¡¥äº† Kubernetes åœ¨åº”ç”¨éƒ¨ç½²ã€å‡çº§ã€é˜²æŠ¤ã€è¿ç»´ç­‰é¢†åŸŸçš„ä¸è¶³ã€‚ OpenKruise æä¾›äº†ä»¥ä¸‹çš„ä¸€äº›æ ¸å¿ƒèƒ½åŠ›ï¼š  å¢å¼ºç‰ˆæœ¬çš„ Workloadsï¼šOpenKruise åŒ…å«äº†ä¸€ç³»åˆ—å¢å¼ºç‰ˆæœ¬çš„å·¥ä½œè´Ÿè½½ï¼Œæ¯”å¦‚ CloneSetã€Advanced StatefulSetã€Advanced DaemonSetã€BroadcastJob ç­‰ã€‚å®ƒä»¬ä¸ä»…æ”¯æŒç±»ä¼¼äº Kubernetes åŸç”Ÿ Workloads çš„åŸºç¡€åŠŸèƒ½ï¼Œè¿˜æä¾›äº†å¦‚åŸåœ°å‡çº§ã€å¯é…ç½®çš„æ‰©ç¼©å®¹&#x2F;å‘å¸ƒç­–ç•¥ã€å¹¶å‘æ“ä½œç­‰ã€‚å…¶ä¸­ï¼ŒåŸåœ°å‡çº§æ˜¯ä¸€ç§å‡çº§åº”ç”¨å®¹å™¨é•œåƒç”šè‡³ç¯å¢ƒå˜é‡çš„å…¨æ–°æ–¹å¼ï¼Œå®ƒåªä¼šç”¨æ–°çš„...</div></div></div></a><a class="pagination-related" href="/2025/09/11/Thanos%20Receiver/" title="Thanos Receiver"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-11</div><div class="info-item-2">Thanos Receiver</div></div><div class="info-2"><div class="info-item-1">Receiverå‰é¢æˆ‘ä»¬æåˆ° Thanos æœ‰ Sidecar å’Œ Receiver ä¸¤ç§ä¸åŒçš„æ¶æ„æ¨¡å¼ï¼Œå‰é¢çš„ç« èŠ‚æˆ‘ä»¬å·²ç»å­¦ä¹ äº† Sidecar æ¨¡å¼çš„æ˜¯å‘€ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥äº†è§£ä¸‹ Receiver æ¨¡å¼æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ æˆ‘ä»¬çŸ¥é“ Sidecar æ˜¯åœ¨æ¯ä¸€ä¸ª Prometheus çš„å®ä¾‹æ—è¾¹æ·»åŠ ä¸€ä¸ª sidecar ç»„ä»¶æ¥ä¸Šä¼ æ•°æ®ï¼Œä½†æ˜¯æ•°æ®ä¸Šä¼ å¹¶ä¸æ˜¯å®æ—¶çš„ï¼Œè€Œæ˜¯æ¯ 2h ä¸Šä¼ ä¸€ä¸ªæ•°æ®å—ï¼Œæ‰€ä»¥è¿œç¨‹å­˜å‚¨çš„æ•°æ®å¹¶ä¸æ˜¯å®æ—¶çš„ï¼ŒPrometheus éœ€è¦å„è‡ªæŒä¹…åŒ–éƒ¨åˆ†æ•°æ®ï¼Œè¿™ä¹Ÿæ˜¯ç°åœ¨ä½¿ç”¨çš„ Sidecar æ¨¡å¼çš„å¼Šç«¯ï¼Œä½†è¿™å¹¶éæ˜¯ Thanos å›¢é˜Ÿå¼•å…¥ Receiver çš„å†³å®šæ€§å› ç´ ã€‚  Receiver is only recommended for uses for whom pushing is the only viable solution, for example, analytics use cases or cases where the data ingestion must be client initiated, such as software as a servic...</div></div></div></a><a class="pagination-related" href="/2025/09/11/%E5%8F%98%E5%8C%96%E7%8E%87/" title="å˜åŒ–ç‡"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-11</div><div class="info-item-2">å˜åŒ–ç‡</div></div><div class="info-2"><div class="info-item-1">å˜åŒ–ç‡é€šå¸¸æ¥è¯´ç›´æ¥ç»˜åˆ¶ä¸€ä¸ªåŸå§‹çš„ Counter ç±»å‹çš„æŒ‡æ ‡æ•°æ®ç”¨å¤„ä¸å¤§ï¼Œå› ä¸ºå®ƒä»¬ä¼šä¸€ç›´å¢åŠ ï¼Œä¸€èˆ¬æ¥è¯´æ˜¯ä¸ä¼šå»ç›´æ¥å…³å¿ƒè¿™ä¸ªæ•°å€¼çš„ï¼Œå› ä¸º Counter ä¸€æ—¦é‡ç½®ï¼Œæ€»è®¡æ•°å°±æ²¡æœ‰æ„ä¹‰äº†ï¼Œæ¯”å¦‚æˆ‘ä»¬ç›´æ¥æ‰§è¡Œä¸‹é¢çš„æŸ¥è¯¢è¯­å¥ï¼š 1demo_api_request_duration_seconds_count&#123;job=&quot;demo&quot;&#125;    å¯ä»¥å¾—åˆ°ä¸‹å›¾æ‰€ç¤ºçš„å›¾å½¢ï¼š  å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„éƒ½æ˜¯ä¸æ–­å¢é•¿çš„ï¼Œä¸€èˆ¬æ¥è¯´æˆ‘ä»¬æ›´æƒ³è¦çŸ¥é“çš„æ˜¯ Counter æŒ‡æ ‡çš„å˜åŒ–ç‡ï¼ŒPromQL æä¾›äº†ä¸åŒçš„å‡½æ•°æ¥è®¡ç®—å˜åŒ–ç‡ã€‚ rateç”¨äºè®¡ç®—å˜åŒ–ç‡çš„æœ€å¸¸è§å‡½æ•°æ˜¯ rate()ï¼Œrate() å‡½æ•°ç”¨äºè®¡ç®—åœ¨æŒ‡å®šæ—¶é—´èŒƒå›´å†…è®¡æ•°å™¨å¹³å‡æ¯ç§’çš„å¢åŠ é‡ã€‚å› ä¸ºæ˜¯è®¡ç®—ä¸€ä¸ªæ—¶é—´èŒƒå›´å†…çš„å¹³å‡å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨åºåˆ—é€‰æ‹©å™¨ä¹‹åæ·»åŠ ä¸€ä¸ªèŒƒå›´é€‰æ‹©å™¨ã€‚ ä¾‹å¦‚æˆ‘ä»¬è¦è®¡ç®— demo_api_request_duration_seconds_count åœ¨æœ€è¿‘äº”åˆ†é’Ÿå†…çš„æ¯ç§’å¹³å‡å˜åŒ–ç‡ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æŸ¥è¯¢è¯­å¥ï¼š 1rate(demo_api_request_duration_seconds_count[5m])   ...</div></div></div></a><a class="pagination-related" href="/2025/09/11/Pod%20%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/" title="Pod ç”Ÿå‘½å‘¨æœŸ"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-11</div><div class="info-item-2">Pod ç”Ÿå‘½å‘¨æœŸ</div></div><div class="info-2"><div class="info-item-1">Pod ç”Ÿå‘½å‘¨æœŸ å‰é¢æˆ‘ä»¬å·²ç»äº†è§£äº† Pod çš„è®¾è®¡åŸç†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥äº†è§£ä¸‹ Pod çš„ç”Ÿå‘½å‘¨æœŸã€‚ä¸‹å›¾å±•ç¤ºäº†ä¸€ä¸ª Pod çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸè¿‡ç¨‹ï¼Œå…¶ä¸­åŒ…å« Init Containerã€Pod Hookã€å¥åº·æ£€æŸ¥ ä¸‰ä¸ªä¸»è¦éƒ¨åˆ†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥åˆ†åˆ«ä»‹ç»å½±å“ Pod ç”Ÿå‘½å‘¨æœŸçš„éƒ¨åˆ†ï¼š é¦–å…ˆåœ¨ä»‹ç» Pod çš„ç”Ÿå‘½å‘¨æœŸä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸‹ Pod çš„çŠ¶æ€ï¼Œå› ä¸º Pod çŠ¶æ€å¯ä»¥ååº”å‡ºå½“å‰æˆ‘ä»¬çš„ Pod çš„å…·ä½“çŠ¶æ€ä¿¡æ¯ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬åˆ†ææ’é”™çš„ä¸€ä¸ªå¿…å¤‡çš„æ–¹å¼ã€‚ Pod çŠ¶æ€é¦–å…ˆå…ˆäº†è§£ä¸‹ Pod çš„çŠ¶æ€å€¼ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ kubectl explain pod.status å‘½ä»¤æ¥äº†è§£å…³äº Pod çŠ¶æ€çš„ä¸€äº›ä¿¡æ¯ï¼ŒPod çš„çŠ¶æ€å®šä¹‰åœ¨ PodStatus å¯¹è±¡ä¸­ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ª phase å­—æ®µï¼Œä¸‹é¢æ˜¯ phase çš„å¯èƒ½å–å€¼ï¼š  æŒ‚èµ·ï¼ˆPendingï¼‰ï¼šPod ä¿¡æ¯å·²ç»æäº¤ç»™äº†é›†ç¾¤ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰è¢«è°ƒåº¦å™¨è°ƒåº¦åˆ°åˆé€‚çš„èŠ‚ç‚¹æˆ–è€… Pod é‡Œçš„é•œåƒæ­£åœ¨ä¸‹è½½ è¿è¡Œä¸­ï¼ˆRunningï¼‰ï¼šè¯¥ Pod å·²ç»ç»‘å®šåˆ°äº†ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼ŒPod ä¸­æ‰€æœ‰çš„å®¹å™¨éƒ½å·²è¢«åˆ›å»ºã€‚è‡³å°‘æœ‰ä¸€ä¸ªå®¹å™¨æ­£åœ¨è¿è¡Œï¼Œæˆ–è€…æ­£å¤„äºå¯åŠ¨æˆ–é‡å¯çŠ¶æ€ æˆåŠŸï¼ˆSuccee...</div></div></div></a><a class="pagination-related" href="/2025/09/11/k8s_12/" title="k8s_12"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-11</div><div class="info-item-2">k8s_12</div></div><div class="info-2"><div class="info-item-1">å¦‚ä½•åœ¨ Kubernetes ä¸­å®ç°æœåŠ¡çš„è‡ªåŠ¨ä¼¸ç¼©ï¼ˆautoscalingï¼‰ï¼ŸOf course. Automating the scaling of services is one of Kubernetesâ€™ most powerful features, enabling applications to be both resilient to traffic spikes and cost-effective during quiet periods. This is achieved through a combination of several components. ğŸ¤” åˆ†æè¿‡ç¨‹ï¼šè¯¥é—®é¢˜æ—¨åœ¨è€ƒå¯Ÿå¯¹Kubernetesæ ¸å¿ƒåŠ¨æ€ç®¡ç†èƒ½åŠ›çš„ç†è§£ã€‚ä¸€ä¸ªå…¨é¢çš„å›ç­”ä¸èƒ½åªæåŠä¸€ç§è‡ªåŠ¨ä¼¸ç¼©æ–¹å¼ï¼Œè€Œåº”ç»“æ„åŒ–åœ°ä»‹ç»Kubernetesä¸­ä¸‰ä¸ªä¸»è¦å±‚æ¬¡çš„è‡ªåŠ¨ä¼¸ç¼©å™¨ï¼šHPA (æ°´å¹³), VPA (å‚ç›´), å’Œ CA (é›†ç¾¤)ã€‚å›ç­”çš„é‡ç‚¹åœ¨äºé˜æ˜æ¯ç§ä¼¸ç¼©å™¨çš„è§¦å‘æœºåˆ¶ã€ä½œç”¨èŒƒå›´å’Œå…¸å‹ç”¨ä¾‹ï¼Œå¹¶è§£é‡Šå®ƒä»¬å¦‚ä½•ååŒå·¥ä½œï¼Œå…±åŒæ„å»ºä¸€ä¸ªå¼¹æ€§çš„ã€èµ„æºé«˜æ•ˆçš„ç³»ç»Ÿã€‚ ğŸ’¡ ç­”æ¡ˆç”Ÿæˆï¼š1. æ¦‚å¿µæˆ–å®šä¹‰Kube...</div></div></div></a><a class="pagination-related" href="/2025/09/11/Thanos-%E6%9E%B6%E6%9E%84/" title="Thanos-æ¶æ„"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-11</div><div class="info-item-2">Thanos-æ¶æ„</div></div><div class="info-2"><div class="info-item-1">Thanos æ¶æ„Thanos æ˜¯ä¸€ä¸ªåŸºäº Prometheus å®ç°çš„ç›‘æ§æ–¹æ¡ˆï¼Œå…¶ä¸»è¦è®¾è®¡ç›®çš„æ˜¯è§£å†³åŸç”Ÿ Prometheus ä¸Šçš„ç—›ç‚¹ï¼Œå¹¶ä¸”åšè¿›ä¸€æ­¥çš„æå‡ï¼Œä¸»è¦çš„ç‰¹æ€§æœ‰ï¼šå…¨å±€æŸ¥è¯¢ï¼Œé«˜å¯ç”¨ï¼ŒåŠ¨æ€æ‹“å±•ï¼Œé•¿æœŸå­˜å‚¨ã€‚ æ¶æ„Thanos ä¸»è¦ç”±å¦‚ä¸‹å‡ ä¸ªç‰¹å®šåŠŸèƒ½çš„ç»„ä»¶ç»„æˆï¼š  è¾¹è½¦ç»„ä»¶ï¼ˆSidecarï¼‰ï¼šè¿æ¥åˆ° Prometheusï¼Œå¹¶æŠŠ Prometheus æš´éœ²ç»™æŸ¥è¯¢ç½‘å…³ï¼ˆQuerier&#x2F;Queryï¼‰ï¼Œä»¥ä¾›å®æ—¶æŸ¥è¯¢ï¼Œå¹¶ä¸”å¯ä»¥ä¸Šä¼  Prometheus æ•°æ®åˆ°äº‘å­˜å‚¨ï¼Œä»¥ä¾›é•¿æœŸä¿å­˜ æŸ¥è¯¢ç½‘å…³ï¼ˆQuerierï¼‰ï¼šå®ç° Prometheus API ä»¥èšåˆæ¥è‡ªåº•å±‚ç»„ä»¶ï¼ˆå¦‚è¾¹è½¦ç»„ä»¶ Sidecarï¼Œæˆ–æ˜¯å­˜å‚¨ç½‘å…³ Store Gatewayï¼‰çš„æ•°æ® å­˜å‚¨ç½‘å…³ï¼ˆStore Gatewayï¼‰ï¼šå°†äº‘å­˜å‚¨ä¸­çš„æ•°æ®å†…å®¹æš´éœ²å‡ºæ¥ å‹ç¼©å™¨ï¼ˆCompactorï¼‰ï¼šå°†äº‘å­˜å‚¨ä¸­çš„æ•°æ®è¿›è¡Œå‹ç¼©å’Œä¸‹é‡‡æ ·å’Œä¿ç•™ æ¥æ”¶å™¨ï¼ˆReceiverï¼‰ï¼šä» Prometheus çš„è¿œç¨‹å†™å…¥ WAL æ¥æ”¶æ•°æ®ï¼Œå°†å…¶æš´éœ²å‡ºå»æˆ–è€…ä¸Šä¼ åˆ°äº‘å­˜å‚¨ è§„åˆ™ç»„ä»¶ï¼ˆRulerï¼‰ï¼šæ ¹æ® Thanos ä¸­çš„æ•°æ®è¯„ä¼°è®°å½•å’Œè­¦æŠ¥è§„åˆ™ æŸ¥è¯¢å‰ç«¯ï¼šå®ç° ...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">å…­ä¸€</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">274</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">22</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">45</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%90%86%E8%A7%A3-Linux-%E7%BD%91%E7%BB%9C%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4"><span class="toc-number">1.</span> <span class="toc-text">ç†è§£ Linux ç½‘ç»œå‘½åç©ºé—´</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4"><span class="toc-number">1.1.</span> <span class="toc-text">ç½‘ç»œå‘½åç©ºé—´</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ip-%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.</span> <span class="toc-text">ip å‘½ä»¤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%AC%AC%E4%B8%80%E4%B8%AA%E7%BD%91%E7%BB%9C%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4"><span class="toc-number">1.3.</span> <span class="toc-text">é…ç½®ç¬¬ä¸€ä¸ªç½‘ç»œå‘½åç©ºé—´</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%AC%AC%E4%BA%8C%E4%B8%AA%E7%BD%91%E7%BB%9C%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4"><span class="toc-number">1.4.</span> <span class="toc-text">é…ç½®ç¬¬äºŒä¸ªç½‘ç»œå‘½åç©ºé—´</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%AD%90%E7%BD%91%E8%B7%AF%E7%94%B1"><span class="toc-number">1.5.</span> <span class="toc-text">é…ç½®å­ç½‘è·¯ç”±</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TCP-%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.6.</span> <span class="toc-text">TCP è¿æ¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">1.7.</span> <span class="toc-text">æ€»ç»“</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/27/hexo-beautify/" title="Hexo åšå®¢ç¾åŒ–ç¬”è®°ï¼šä»é›¶æ­å»ºé«˜é¢œå€¼æŠ€æœ¯åšå®¢">Hexo åšå®¢ç¾åŒ–ç¬”è®°ï¼šä»é›¶æ­å»ºé«˜é¢œå€¼æŠ€æœ¯åšå®¢</a><time datetime="2026-02-27T04:00:00.000Z" title="å‘è¡¨äº 2026-02-27 12:00:00">2026-02-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/11/Jenkens-Blue%20Ocean%20%E6%8F%92%E4%BB%B6/" title="Jenkins Blue Ocean">Jenkins Blue Ocean</a><time datetime="2025-09-11T12:42:57.000Z" title="å‘è¡¨äº 2025-09-11 20:42:57">2025-09-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/11/jenkins-jenkinsfile/" title="Jenkins Jenkinsfile">Jenkins Jenkinsfile</a><time datetime="2025-09-11T12:40:44.000Z" title="å‘è¡¨äº 2025-09-11 20:40:44">2025-09-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/11/shell-trap/" title="Linux-trap">Linux-trap</a><time datetime="2025-09-11T12:40:44.000Z" title="å‘è¡¨äº 2025-09-11 20:40:44">2025-09-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/11/shell-%E6%95%B0%E7%BB%84/" title="Shell-æ•°ç»„">Shell-æ•°ç»„</a><time datetime="2025-09-11T12:40:44.000Z" title="å‘è¡¨äº 2025-09-11 20:40:44">2025-09-11</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 - 2026 By å…­ä¸€</span><span class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.4</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æ—¥é—´å’Œå¤œé—´æ¨¡å¼åˆ‡æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.4"></script><script src="/js/main.js?v=5.5.4"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true}});</script></body></html>